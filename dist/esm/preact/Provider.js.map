{"version":3,"file":"Provider.js","sourceRoot":"","sources":["../../../src/preact/Provider.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,QAAQ,IAAI,oBAAoB,EAAE,MAAM,mBAAmB,CAAC;AAErE,OAAO,EAAE,CAAC,EAAE,MAAM,QAAQ,CAAC;AAC3B,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AACnD,OAAO,EAAE,yCAAyC,EAAE,MAAM,aAAa,CAAC;AACxE,OAAO,EAAE,+BAA+B,EAAE,MAAM,cAAc,CAAC;AAM/D,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,EAAE,GAAG,EAAE,YAAY,EAAE,QAAQ,EAA+E,EAAE,EAAE;IACvI,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAE1C,SAAS,CAAC,GAAG,EAAE;QACb,yCAAyC,CAAC,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;QACjE,QAAQ,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,EAAE,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,CAAC;IAExB,OAAO,CAAC,CAAC,oBAAoB,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,CAAC,+BAA+B,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;AACtI,CAAC,CAAC","sourcesContent":["import type { AnyClient } from \"@gadgetinc/core\";\nimport { Provider as GadgetPreactProvider } from \"@gadgetinc/preact\";\nimport type { ComponentChildren } from \"preact\";\nimport { h } from \"preact\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { registerShopifySessionTokenAuthentication } from \"../index.js\";\nimport { GadgetShopifyUIExtensionContext } from \"./context.js\";\n\nexport interface SessionToken {\n  get: () => Promise<string>;\n}\n\nexport const Provider = ({ api, sessionToken, children }: { api: AnyClient; sessionToken: SessionToken; children: ComponentChildren }) => {\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    registerShopifySessionTokenAuthentication(api, sessionToken.get);\n    setReady(true);\n  }, [api, sessionToken]);\n\n  return h(GadgetPreactProvider, { api, children: h(GadgetShopifyUIExtensionContext.Provider, { value: { api, ready }, children }) });\n};\n"]}