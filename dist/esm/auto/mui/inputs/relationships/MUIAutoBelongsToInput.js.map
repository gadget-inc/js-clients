{"version":3,"file":"MUIAutoBelongsToInput.js","sourceRoot":"","sources":["../../../../../../src/auto/mui/inputs/relationships/MUIAutoBelongsToInput.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,GAAG,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AACzE,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,2BAA2B,EAAE,MAAM,+CAA+C,CAAC;AAG5F,MAAM,CAAC,MAAM,qBAAqB,GAAG,CAAC,KAAiC,EAAE,EAAE;IACzE,MAAM,EACJ,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjC,mBAAmB,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,EAEpD,cAAc,EACd,cAAc,GACf,GAAG,2BAA2B,CAAC,KAAK,CAAC,CAAC;IAEvC,OAAO,CACL,oBAAC,YAAY,IACX,EAAE,EAAE,GAAG,cAAc,EAAE,EAAE,IAAI,cAAc,EAAE,KAAK,EAAE,EACpD,YAAY,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE;YAC9B,MAAM,gBAAgB,GAAG,MAAM,CAAC,QAAQ,KAAK,IAAI,CAAC;YAClD,MAAM,UAAU,GAAG,cAAc,EAAE,EAAE,KAAK,MAAM,CAAC,QAAQ,CAAC;YAC1D,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,CACzB,oBAAC,GAAG,IAAC,SAAS,EAAC,IAAI,KAAK,KAAK;gBAC1B,UAAU,IAAI,KAAK;gBACnB,MAAM,CAAC,KAAK,CACT,CACP,CAAC,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAC3B,oBAAC,GAAG,OACE,KAAK,EACT,SAAS,EAAC,IAAI,EACd,OAAO,EAAE,GAAG,EAAE,CAAC,SAAS,EACxB,WAAW,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,YAAY,EAAE;gBAM5C,oBAAC,UAAU,IAAC,KAAK,EAAE,MAAM,IAAG,mBAAmB,CAAC,KAAK,CAAc,CAC/D,CACP,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,0BAA0B;QACtC,CAAC,EACD,OAAO,EAAE,CAAC,GAAG,OAAO,EAAE,mBAAmB,CAAC,EAC1C,QAAQ,EAAE,CAAC,CAAC,EAAE,aAAa,EAAE,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE,CAAC,EAChE,OAAO,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAC3B,WAAW,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CACvB,oBAAC,SAAS,OACJ,MAAM,EACV,KAAK,EAAE,MAAM,CAAC,KAAK,EACnB,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,QAAQ,CAAC,IAAI,EACnC,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAC3C,IAAI,EAAE,IAAI,GACV,CACH,GACa,CACjB,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,mBAAmB,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC","sourcesContent":["import { Autocomplete, Box, TextField, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { useBelongsToInputController } from \"../../../hooks/useBelongsToInputController.js\";\nimport type { AutoRelationshipInputProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\n\nexport const MUIAutoBelongsToInput = (props: AutoRelationshipInputProps) => {\n  const {\n    fieldMetadata: { path, metadata },\n    relatedModelOptions: { options, pagination, search },\n\n    selectedRecord,\n    onSelectRecord,\n  } = useBelongsToInputController(props);\n\n  return (\n    <Autocomplete\n      id={`${selectedRecord?.id}_${selectedRecord?.label}`}\n      renderOption={(props, option) => {\n        const isShowMoreButton = option.recordId === \"-1\";\n        const isSelected = selectedRecord?.id === option.recordId;\n        return !isShowMoreButton ? (\n          <Box component=\"li\" {...props}>\n            {isSelected && `✔️ `}\n            {option.label}\n          </Box>\n        ) : pagination.hasNextPage ? (\n          <Box\n            {...props}\n            component=\"li\"\n            onClick={() => undefined} // Overriding the default onClick makes this un-selectable\n            onMouseOver={() => pagination.loadNextPage()}\n          >\n            {/* TODO \n              - Implement a ListBox type of component that automatically loads more records when scrolled to the bottom\n              - Currently using a `hover to show more` approach since scroll controls need debouncing and scroll position tracking systems\n            */}\n            <Typography color={\"blue\"}>{showMoreHoverOption.label}</Typography>\n          </Box>\n        ) : null; // No more records to load\n      }}\n      options={[...options, showMoreHoverOption]}\n      onChange={(e, selectedValue) => onSelectRecord(selectedValue.id)}\n      onClose={() => search.set()}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          value={search.value}\n          label={props.label ?? metadata.name}\n          onChange={(e) => search.set(e.target.value)}\n          name={path}\n        />\n      )}\n    ></Autocomplete>\n  );\n};\n\nconst showMoreHoverOption = { recordId: \"-1\", label: \"Show more\" };\n"]}