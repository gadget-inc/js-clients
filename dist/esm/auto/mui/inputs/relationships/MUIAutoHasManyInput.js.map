{"version":3,"file":"MUIAutoHasManyInput.js","sourceRoot":"","sources":["../../../../../../src/auto/mui/inputs/relationships/MUIAutoHasManyInput.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,GAAG,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AACzE,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAClD,OAAO,EAAE,yBAAyB,EAAE,MAAM,wCAAwC,CAAC;AAGnF,MAAM,CAAC,MAAM,mBAAmB,GAAG,SAAS,CAAC,CAAC,KAAiC,EAAE,EAAE;IACjF,MAAM,EACJ,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjC,mBAAmB,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,EAEpD,eAAe,EAEf,cAAc,GACf,GAAG,yBAAyB,CAAC,KAAK,CAAC,CAAC;IAErC,MAAM,iBAAiB,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IAErE,OAAO,CACL,oBAAC,YAAY,IACX,QAAQ,QACR,YAAY,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE;YAC9B,MAAM,gBAAgB,GAAG,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC;YAC5C,MAAM,UAAU,GAAG,iBAAiB,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACzD,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,CACzB,oBAAC,GAAG,IAAC,SAAS,EAAC,IAAI,KAAK,KAAK;gBAC1B,UAAU,IAAI,KAAK;gBACnB,MAAM,CAAC,KAAK,CACT,CACP,CAAC,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAC3B,oBAAC,GAAG,OACE,KAAK,EACT,SAAS,EAAC,IAAI,EACd,OAAO,EAAE,GAAG,EAAE,CAAC,SAAS,EACxB,WAAW,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,YAAY,EAAE;gBAM5C,oBAAC,UAAU,IAAC,KAAK,EAAE,MAAM,IAAG,mBAAmB,CAAC,KAAK,CAAc,CAC/D,CACP,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,0BAA0B;QACtC,CAAC,EACD,OAAO,EAAE,CAAC,GAAG,OAAO,EAAE,mBAAmB,CAAC,EAC1C,QAAQ,EAAE,CAAC,CAAC,EAAE,aAAa,EAAE,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,EACjF,OAAO,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAC3B,WAAW,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CACvB,oBAAC,SAAS,OACJ,MAAM,EACV,KAAK,EAAE,MAAM,CAAC,KAAK,EACnB,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,QAAQ,CAAC,IAAI,EACnC,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAC3C,IAAI,EAAE,IAAI,GACV,CACH,GACa,CACjB,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,MAAM,mBAAmB,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC","sourcesContent":["import { Autocomplete, Box, TextField, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { autoInput } from \"../../../AutoInput.js\";\nimport { useHasManyInputController } from \"../../../hooks/useHasManyController.js\";\nimport type { AutoRelationshipInputProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\n\nexport const MUIAutoHasManyInput = autoInput((props: AutoRelationshipInputProps) => {\n  const {\n    fieldMetadata: { path, metadata },\n    relatedModelOptions: { options, search, pagination },\n\n    selectedRecords,\n\n    onSelectRecord,\n  } = useHasManyInputController(props);\n\n  const selectedRecordIds = selectedRecords.map((record) => record.id);\n\n  return (\n    <Autocomplete\n      multiple\n      renderOption={(props, option) => {\n        const isShowMoreButton = option.id === \"-1\";\n        const isSelected = selectedRecordIds.includes(option.id);\n        return !isShowMoreButton ? (\n          <Box component=\"li\" {...props}>\n            {isSelected && `✔️ `}\n            {option.label}\n          </Box>\n        ) : pagination.hasNextPage ? (\n          <Box\n            {...props}\n            component=\"li\"\n            onClick={() => undefined} // Overriding the default onClick makes this un-selectable\n            onMouseOver={() => pagination.loadNextPage()}\n          >\n            {/* TODO \n              - Implement a ListBox type of component that automatically loads more records when scrolled to the bottom\n              - Currently using a `hover to show more` approach since scroll controls need debouncing and scroll position tracking systems\n            */}\n            <Typography color={\"blue\"}>{showMoreHoverOption.label}</Typography>\n          </Box>\n        ) : null; // No more records to load\n      }}\n      options={[...options, showMoreHoverOption]}\n      onChange={(e, selectedValue) => selectedValue.forEach((id) => onSelectRecord(id))}\n      onClose={() => search.set()}\n      renderInput={(params) => (\n        <TextField\n          {...params}\n          value={search.value}\n          label={props.label ?? metadata.name}\n          onChange={(e) => search.set(e.target.value)}\n          name={path}\n        />\n      )}\n    ></Autocomplete>\n  );\n});\n\nconst showMoreHoverOption = { id: \"-1\", label: \"Show more\" };\n"]}