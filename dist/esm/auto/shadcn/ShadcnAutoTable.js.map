{"version":3,"file":"ShadcnAutoTable.js","sourceRoot":"","sources":["../../../../src/auto/shadcn/ShadcnAutoTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import { type FindManyFunction, type GadgetRecord } from \"@gadgetinc/api-client-core\";\nimport * as React from \"react\";\nimport { useCallback, useMemo } from \"react\";\nimport type { SortState, TableColumn, TableRow } from \"../../use-table/types.js\";\nimport { SelectionType, type RecordSelection } from \"../../useSelectedRecordsController.js\";\nimport { useTable } from \"../../useTable.js\";\nimport { type ColumnValueType, type OptionsType } from \"../../utils.js\";\nimport { type AutoTableProps } from \"../AutoTable.js\";\nimport { validateAutoTableProps } from \"../AutoTableValidators.js\";\nimport { useHover } from \"../hooks/useHover.js\";\nimport { useTableBulkActions } from \"../hooks/useTableBulkActions.js\";\nimport type { ShadcnElements } from \"./elements.js\";\nimport { makeShadcnAutoLoadingIndicator } from \"./table/ShadcnAutoLoadingIndicator.js\";\nimport { makeShadcnAutoTableBulkActionModal } from \"./table/ShadcnAutoTableBulkActionModal.js\";\nimport { makeShadcnAutoTableBulkActionSelector } from \"./table/ShadcnAutoTableBulkActionSelector.js\";\nimport { makeShadcnAutoTableColumnSortIndicator } from \"./table/ShadcnAutoTableColumnSortIndicator.js\";\nimport { makeShadcnAutoTablePagination } from \"./table/ShadcnAutoTablePagination.js\";\nimport { makeShadcnAutoTableSearch } from \"./table/ShadcnAutoTableSearch.js\";\nimport { makeShadcnAutoTableCellRenderer } from \"./table/cells/ShadcnAutoTableCellRenderer.js\";\n\nexport type ShadcnAutoTableProps<\n  GivenOptions extends OptionsType,\n  SchemaT,\n  FinderFunction extends FindManyFunction<GivenOptions, any, SchemaT, any>,\n  Options extends FinderFunction[\"optionsType\"]\n> = AutoTableProps<GivenOptions, SchemaT, FinderFunction, Options>;\n\n/**\n * Renders a table for a model automatically using Shadcn\n */\nexport const makeAutoTable = (elements: ShadcnElements) => {\n  const { Alert, Skeleton, Table, TableBody, TableCell, TableHead, TableHeader, TableRow, Label, Checkbox, Button } = elements;\n\n  const ShadcnAutoTableCellRenderer = makeShadcnAutoTableCellRenderer(elements);\n  const ShadcnAutoTablePagination = makeShadcnAutoTablePagination(elements);\n  const ShadcnAutoTableSearch = makeShadcnAutoTableSearch(elements);\n  const ShadcnAutoTableColumnSortIndicator = makeShadcnAutoTableColumnSortIndicator(elements);\n  const ShadcnAutoTableBulkActionSelector = makeShadcnAutoTableBulkActionSelector(elements);\n  const ShadcnAutoTableBulkActionModal = makeShadcnAutoTableBulkActionModal(elements);\n  const ShadcnAutoLoadingIndicator = makeShadcnAutoLoadingIndicator(elements);\n\n  function AutoTableSelectAllCheckbox(props: { selection: RecordSelection; rows: TableRow[] }) {\n    const { selection, rows } = props;\n    return (\n      <>\n        <Checkbox\n          id=\"AutoTableSelectAllCheckbox\"\n          checked={\n            selection.recordIds.length === rows?.length && rows?.length > 0\n              ? true\n              : selection.recordIds.length > 0\n              ? \"indeterminate\"\n              : false\n          }\n          onCheckedChange={(value) => selection.onSelectionChange(SelectionType.Page, !!value)}\n          onClick={(e) => e.stopPropagation()}\n        />\n      </>\n    );\n  }\n\n  function AutoTableColumnHeaders(props: {\n    columns: TableColumn[];\n    sort: SortState;\n    canSelectRecords?: boolean;\n    selection: RecordSelection;\n    rows: TableRow[];\n  }) {\n    const { columns, sort, canSelectRecords, selection, rows } = props;\n\n    const [isHovered, hoverProps] = useHover();\n    return (\n      <>\n        <TableRow {...hoverProps} className=\"bg-background hover:bg-muted\">\n          {canSelectRecords && (\n            <TableHead className={`sticky left-0 z-30 bg-${isHovered ? \"muted\" : \"background\"}`}>\n              <AutoTableSelectAllCheckbox selection={selection} rows={rows} />\n            </TableHead>\n          )}\n\n          {columns.map((column, i) => (\n            <AutoTableColumnHeader\n              key={column.identifier}\n              column={column}\n              sort={sort}\n              canSelectRecords={canSelectRecords}\n              isRowHovered={isHovered}\n              shouldBeSticky={i === 0}\n            />\n          ))}\n        </TableRow>\n      </>\n    );\n  }\n  function AutoTableColumnHeader(props: {\n    column: TableColumn;\n    sort: SortState;\n    canSelectRecords?: boolean;\n    shouldBeSticky?: boolean;\n    isRowHovered: boolean;\n  }) {\n    const { column, sort, canSelectRecords, shouldBeSticky, isRowHovered } = props;\n\n    const [isHovered, hoverProps] = useHover();\n    const ColumnHeaderLabel = (\n      <>\n        <Label>{column.header}</Label>\n        <ShadcnAutoTableColumnSortIndicator column={column} sortState={sort} isHovered={isHovered} />\n      </>\n    );\n\n    const stickyClass = shouldBeSticky ? `sticky left-${canSelectRecords ? \"6\" : \"0\"} z-10` : \"\";\n\n    return (\n      <>\n        <TableHead key={column.identifier} className={`${stickyClass} bg-${isRowHovered ? \"muted\" : \"background\"}`}>\n          <div className={`flex flex-row items-center gap-2 z-10 `}>\n            {column.sortable ? (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"cursor-pointer\"\n                onClick={() => sort.handleColumnSort(column.field)}\n                {...hoverProps}\n              >\n                {ColumnHeaderLabel}\n              </Button>\n            ) : (\n              ColumnHeaderLabel\n            )}\n          </div>\n        </TableHead>\n      </>\n    );\n  }\n  const getCellBackgroundColor = (isSticky: boolean, isSelected: boolean, isHovered: boolean) => {\n    if (isSticky) {\n      // unselected sticky gets regular background regardless of hover. Since the hover is partial opacity, we need to overlay it over the normal BG color to make it match the rest of the cell\n      return isSelected ? \"bg-muted\" : \"bg-background\";\n    }\n    return isSelected ? \"bg-muted\" : isHovered ? \"bg-muted/50\" : \"bg-background\";\n  };\n\n  function AutoTableSingleRowCheckbox(props: {\n    row: TableRow;\n    isSelected: boolean;\n    toggleRecordSelection: (rowId: string) => void;\n    isHovered: boolean;\n  }) {\n    const { row, isSelected, toggleRecordSelection, isHovered } = props;\n\n    return (\n      <TableCell className={`sticky left-0 ${getCellBackgroundColor(true, isSelected, isHovered)}`}>\n        <Checkbox\n          id={`AutoTableSingleRowCheckbox-${row.id as string}`}\n          checked={isSelected}\n          className=\"z-100\"\n          onClick={(e) => {\n            toggleRecordSelection(row.id as string);\n            e.stopPropagation();\n          }}\n        />\n        {!isSelected && isHovered && <div className={`absolute inset-0 bg-muted/50 z-0`} />}\n      </TableCell>\n    );\n  }\n\n  function AutoTableRowData(props: {\n    row: TableRow;\n    columns: TableColumn[];\n    canSelectRecords?: boolean;\n    isSelected: boolean;\n    isHovered: boolean;\n  }) {\n    const { row, columns, canSelectRecords, isSelected, isHovered } = props;\n\n    const rowComponent = useMemo(() => {\n      return (\n        <>\n          {columns.map((column, i) => {\n            const isSticky = i === 0;\n            return (\n              <TableCell\n                key={column.identifier}\n                style={column.style}\n                className={`${\n                  isSticky ? `sticky left-${canSelectRecords ? \"6\" : \"0\"} z-10` : ``\n                } max-w-[200px] overflow-hidden text-ellipsis whitespace-nowrap ${getCellBackgroundColor(isSticky, isSelected, isHovered)}`}\n              >\n                {isSticky && !isSelected && isHovered && <div className={`absolute inset-0 bg-muted/50`} />}\n                {column.type == \"CustomRenderer\" ? (\n                  (row[column.identifier] as React.ReactNode)\n                ) : (\n                  <ShadcnAutoTableCellRenderer column={column} value={row[column.identifier] as ColumnValueType} />\n                )}\n              </TableCell>\n            );\n          })}\n        </>\n      );\n    }, [canSelectRecords, columns.map((c) => c.identifier).join(\",\"), Object.values(row).join(\",\"), isSelected, isHovered]);\n    return rowComponent;\n  }\n\n  function ShadcnAutoTableComponent<\n    GivenOptions extends OptionsType,\n    SchemaT,\n    FinderFunction extends FindManyFunction<GivenOptions, any, SchemaT, any>,\n    Options extends FinderFunction[\"optionsType\"]\n  >(props: ShadcnAutoTableProps<GivenOptions, SchemaT, FinderFunction, Options>) {\n    const { onClick, searchable = true, paginate = true } = props;\n\n    const [methods, refresh] = useTable<GivenOptions, SchemaT, FinderFunction, Options>(props.model, {\n      select: props.select,\n      columns: props.columns,\n      excludeColumns: props.excludeColumns,\n      pageSize: props.pageSize,\n      live: props.live,\n      initialSort: props.initialSort,\n      filter: props.filter,\n      search: props.searchValue,\n    } as any);\n\n    const {\n      columns,\n      rows,\n\n      page,\n      search,\n      fetching, // TODO - add a loading state\n      error, // TODO - add an error state\n      selection,\n      sort,\n      metadata,\n      data: rawRecords,\n    } = methods;\n\n    const onClickCallback = useCallback(\n      (row: any, rawRecord: GadgetRecord<any>) => {\n        return () => onClick?.(row, rawRecord);\n      },\n      [onClick]\n    );\n\n    const { bulkActionOptions, selectedModelActionDetails } = useTableBulkActions({\n      model: props.model,\n      actions: props.actions,\n      excludeActions: props.excludeActions,\n    });\n    const canSelectRecords = props.selectable === undefined ? bulkActionOptions.length !== 0 : props.selectable;\n    const hasSelectedRecords = selection.recordIds.length > 0;\n\n    const toggleRecordSelection = useCallback(\n      (rowId: string) => {\n        if (!canSelectRecords) {\n          return;\n        }\n        selection.onSelectionChange(SelectionType.Single, !selection.recordIds.includes(rowId), rowId);\n      },\n      [selection, canSelectRecords]\n    );\n\n    if (error) {\n      return <Alert>Error</Alert>;\n    }\n    if ((fetching && !rows) || !columns) {\n      return <Skeleton />;\n    }\n\n    return (\n      <>\n        <ShadcnAutoTableBulkActionModal\n          model={props.model}\n          modelActionDetails={selectedModelActionDetails}\n          ids={selection.recordIds}\n          clearSelection={selection.clearAll}\n        />\n\n        <div className=\"flex flex-row gap-2 items-center mb-2\">\n          {searchable && <ShadcnAutoTableSearch search={search} />}\n          {hasSelectedRecords && (\n            <div className=\"ml-auto\">\n              <div className=\"flex flex-row ml-auto gap-2 items-center\">\n                <Label className=\"ml-2\">{`${selection.recordIds.length} selected`}</Label>\n                <ShadcnAutoTableBulkActionSelector bulkActionOptions={bulkActionOptions} selection={selection} rows={rows} />\n              </div>\n            </div>\n          )}\n        </div>\n        <Table className=\"w-full border-collapse\">\n          <TableHeader className=\"sticky top-0 bg-background z-20\">\n            <AutoTableColumnHeaders columns={columns} sort={sort} canSelectRecords={canSelectRecords} selection={selection} rows={rows} />\n          </TableHeader>\n          <TableBody className=\"bg-background\">\n            {rows?.length > 0 &&\n              rows.map((row, index) => (\n                <AutoTableRow\n                  key={row.id as string}\n                  row={row}\n                  columns={columns}\n                  canSelectRecords={canSelectRecords}\n                  toggleRecordSelection={toggleRecordSelection}\n                  onClick={onClick ? onClickCallback(row, rawRecords?.[index]) : () => toggleRecordSelection(row.id as string)}\n                  isSelected={selection.recordIds.includes(row.id as string)}\n                />\n              ))}\n          </TableBody>\n        </Table>\n\n        {rows?.length === 0 && (\n          <>{props.emptyState ?? <div className=\"h-24 text-center flex items-center justify-center\">{`No results`}</div>}</>\n        )}\n        {paginate && <ShadcnAutoTablePagination page={page} />}\n      </>\n    );\n  }\n\n  const AutoTableRow = (props: {\n    row: TableRow;\n    columns: TableColumn[];\n    canSelectRecords?: boolean;\n    onClick?: () => void;\n    toggleRecordSelection: (rowId: string) => void;\n    isSelected: boolean;\n  }) => {\n    const { row, columns, canSelectRecords, onClick, toggleRecordSelection, isSelected } = props;\n    const [isHovered, hoverProps] = useHover();\n\n    return (\n      <TableRow\n        key={row.id as string}\n        className={`${canSelectRecords || onClick ? \"cursor-pointer\" : \"\"} `}\n        data-state={isSelected ? \"selected\" : undefined}\n        onClick={onClick}\n        {...hoverProps}\n      >\n        {canSelectRecords && (\n          <AutoTableSingleRowCheckbox\n            row={row}\n            isSelected={isSelected}\n            toggleRecordSelection={toggleRecordSelection}\n            isHovered={isHovered}\n          />\n        )}\n        <AutoTableRowData row={row} columns={columns} canSelectRecords={canSelectRecords} isSelected={isSelected} isHovered={isHovered} />\n      </TableRow>\n    );\n  };\n\n  return <\n    GivenOptions extends OptionsType,\n    SchemaT,\n    FinderFunction extends FindManyFunction<GivenOptions, any, SchemaT, any>,\n    Options extends FinderFunction[\"optionsType\"]\n  >(\n    props: ShadcnAutoTableProps<GivenOptions, SchemaT, FinderFunction, Options>\n  ) => {\n    const { model } = props;\n    validateAutoTableProps(model);\n    const componentKey = `${[model.findMany.namespace, model.findMany.modelApiIdentifier].join(\"_\")}AutoTable`;\n\n    return <ShadcnAutoTableComponent key={componentKey} {...props} />;\n  };\n};\n"]}