{"version":3,"file":"ShadcnAutoTableBulkActionModal.js","sourceRoot":"","sources":["../../../../../src/auto/shadcn/table/ShadcnAutoTableBulkActionModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useMemo } from \"react\";\nimport {\n  getRunActionConfirmationText,\n  useAutoTableBulkActionModal,\n  useGadgetBulkActionModalContent,\n  type AutoBulkActionModal,\n  type GadgetBulkActionModalContentProps,\n} from \"../../hooks/useTableBulkActions.js\";\nimport { type ShadcnElements } from \"../elements.js\";\nimport { makeShadcnAutoLoadingIndicator } from \"./ShadcnAutoLoadingIndicator.js\";\n\nexport const makeShadcnAutoTableBulkActionModal = (elements: ShadcnElements) => {\n  const { Label, Button, Alert, Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } = elements;\n\n  const LoadingIndicator = makeShadcnAutoLoadingIndicator(elements);\n\n  function ShadcnAutoTableBulkActionModal(props: AutoBulkActionModal) {\n    const { model, modelActionDetails, ids } = props;\n    const { actionIsLoaded, closeAndClear, isBulkGadgetAction, modalTitle, showModal } = useAutoTableBulkActionModal(props);\n\n    if (!actionIsLoaded || !isBulkGadgetAction || !modelActionDetails) {\n      return null;\n    }\n\n    return (\n      <>\n        <Dialog\n          open={showModal}\n          onOpenChange={(open) => {\n            if (!open) {\n              closeAndClear();\n            }\n          }}\n        >\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>{modalTitle}</DialogTitle>\n            </DialogHeader>\n            <GadgetBulkActionModalContent\n              model={model}\n              modelActionDetails={modelActionDetails}\n              actionLabel={modalTitle}\n              ids={ids}\n              close={closeAndClear}\n            />\n          </DialogContent>\n        </Dialog>\n      </>\n    );\n  }\n\n  function GadgetBulkActionModalContent(props: GadgetBulkActionModalContentProps) {\n    const { ids, close } = props;\n\n    const { hasRun, actionResultMessage, fetching, hasError, runAction } = useGadgetBulkActionModalContent(props);\n\n    return (\n      <>\n        <DialogDescription>\n          {fetching && (\n            <div className=\"flex items-center justify-center min-h-8\">\n              <LoadingIndicator />\n            </div>\n          )}\n          {!fetching &&\n            (hasRun ? (\n              <Alert variant={hasError ? \"destructive\" : \"default\"}>{actionResultMessage}</Alert>\n            ) : (\n              <RunActionConfirmationText count={ids.length} />\n            ))}\n        </DialogDescription>\n        <DialogDescription className=\"flex flex-row gap-2 ml-auto\">\n          <Button onClick={close} variant=\"secondary\">\n            Close\n          </Button>\n          {((!hasError && !hasRun) || fetching) && (\n            <Button onClick={runAction} disabled={fetching}>\n              Run\n            </Button>\n          )}\n        </DialogDescription>\n      </>\n    );\n  }\n\n  function RunActionConfirmationText(props: { count: number }) {\n    const { count } = props;\n    return useMemo(() => <Label>{getRunActionConfirmationText(count)}</Label>, [count]);\n  }\n\n  return ShadcnAutoTableBulkActionModal;\n};\n"]}