{"version":3,"file":"PolarisWCModal.js","sourceRoot":"","sources":["../../../../../src/auto/polaris-wc/commonComponents/PolarisWCModal.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,SAAS,EAAE,MAAM,EAAkB,MAAM,OAAO,CAAC;AAsBjE;;;GAGG;AACH,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,KAA0B,EAAE,EAAE;IAC3D,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC;IACxD,MAAM,QAAQ,GAAG,MAAM,CAAc,IAAI,CAAC,CAAC;IAE3C,iDAAiD;IACjD,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,KAAK;YAAE,OAAO;QAEnB,MAAM,EAAE,GAAG,KAA0E,CAAC;QACtF,IAAI,IAAI,EAAE,CAAC;YACT,MAAM,OAAO,GAAG,qBAAqB,CAAC,GAAG,EAAE;gBACzC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC;YACrB,CAAC,CAAC,CAAC;YACH,OAAO,GAAG,EAAE,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;QAC7C,CAAC;aAAM,CAAC;YACN,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC;QACrB,CAAC;IACH,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;IAEX,oFAAoF;IACpF,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;QAC/B,IAAI,CAAC,KAAK;YAAE,OAAO;QAEnB,MAAM,WAAW,GAAG,GAAG,EAAE;YACvB,YAAY,CAAC,KAAK,CAAC,CAAC;QACtB,CAAC,CAAC;QAEF,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;QAC7C,OAAO,GAAG,EAAE,CAAC,KAAK,CAAC,mBAAmB,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;IAC/D,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;IAEnB,OAAO,CACL,iCAAS,GAAG,EAAE,QAAe,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,IACpF,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CACf,CACX,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import React, { useEffect, useRef, type ReactNode } from \"react\";\n\nexport interface PolarisWCModalProps {\n  /**\n   * Whether the modal is open. Controls visibility via the s-modal showOverlay/hideOverlay API.\n   */\n  open: boolean;\n  /**\n   * Callback when the modal should close (user dismissed or overlay hidden).\n   * Pass `false` to the parent so it can set open to false.\n   */\n  onOpenChange: (open: boolean) => void;\n  /**\n   * Modal title shown in the header.\n   */\n  heading?: string;\n  /**\n   * Modal body and optional footer. Rendered inside the modal.\n   */\n  children?: ReactNode;\n}\n\n/**\n * Controlled modal wrapper around the Polaris Web Components s-modal.\n * Uses a ref to call showOverlay()/hideOverlay() so open/closed state is driven by props.\n */\nexport const PolarisWCModal = (props: PolarisWCModalProps) => {\n  const { open, onOpenChange, heading, children } = props;\n  const modalRef = useRef<HTMLElement>(null);\n\n  // Sync open prop with s-modal overlay visibility\n  useEffect(() => {\n    const modal = modalRef.current;\n    if (!modal) return;\n\n    const el = modal as unknown as { showOverlay?: () => void; hideOverlay?: () => void };\n    if (open) {\n      const frameId = requestAnimationFrame(() => {\n        el.showOverlay?.();\n      });\n      return () => cancelAnimationFrame(frameId);\n    } else {\n      el.hideOverlay?.();\n    }\n  }, [open]);\n\n  // Notify parent when the modal is closed (e.g. backdrop click, escape, onAfterHide)\n  useEffect(() => {\n    const modal = modalRef.current;\n    if (!modal) return;\n\n    const handleClose = () => {\n      onOpenChange(false);\n    };\n\n    modal.addEventListener(\"close\", handleClose);\n    return () => modal.removeEventListener(\"close\", handleClose);\n  }, [onOpenChange]);\n\n  return (\n    <s-modal ref={modalRef as any} heading={heading} onAfterHide={() => onOpenChange(false)}>\n      {open ? children : null}\n    </s-modal>\n  );\n};\n"]}