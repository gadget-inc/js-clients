{"version":3,"file":"PolarisWCAutoJSONInput.js","sourceRoot":"","sources":["../../../../../src/auto/polaris-wc/inputs/PolarisWCAutoJSONInput.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAuB,WAAW,EAAE,MAAM,OAAO,CAAC;AAChE,OAAO,EAAE,QAAQ,EAAE,MAAM,sBAAsB,CAAC;AAChD,OAAO,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAC;AAC/C,OAAO,EAAE,sBAAsB,EAAE,MAAM,uCAAuC,CAAC;AAK/E;;;;;;;;;;;GAWG;AACH,MAAM,CAAC,MAAM,sBAAsB,GAAG,SAAS,CAAC,CAAC,KAAkC,EAAE,EAAE;IACrF,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,SAAS,EAAE,GAAG,KAAK,CAAC;IACrE,MAAM,CAAC,SAAS,EAAE,UAAU,CAAC,GAAG,QAAQ,EAAE,CAAC;IAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,eAAe,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,sBAAsB,CAAC,SAAS,CAAC,CAAC;IAE/H,MAAM,YAAY,GAAG,WAAW,CAC9B,CAAC,KAAY,EAAE,EAAE;QACf,MAAM,MAAM,GAAG,KAAK,CAAC,aAAoB,CAAC;QAC1C,QAAQ,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;IAC/B,CAAC,EACD,CAAC,QAAQ,CAAC,CACX,CAAC;IAEF,kCAAkC;IAClC,MAAM,KAAK,GAAW,CAAC,KAAK,CAAC,KAAK,IAAI,MAAM,CAAC,eAAe,IAAI,EAAE,CAAC,CAAW,CAAC;IAC/E,MAAM,YAAY,GAAG,CAAC,SAAS,IAAI,YAAY,CAAC,CAAC,CAAC,iBAAiB,YAAY,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;IAC9F,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,UAAU,CAAC;IACvC,MAAM,WAAW,GAAG,WAAW,CAC7B,CAAC,KAAY,EAAE,EAAE;QACf,OAAO,EAAE,CAAC,KAAY,CAAC,CAAC;IAC1B,CAAC,EACD,CAAC,OAAO,CAAC,CACV,CAAC;IAEF,MAAM,UAAU,GAAG,WAAW,CAC5B,CAAC,KAAY,EAAE,EAAE;QACf,MAAM,EAAE,CAAC,KAAY,CAAC,CAAC;IACzB,CAAC,EACD,CAAC,MAAM,CAAC,CACT,CAAC;IAEF,OAAO,CACL,qCACE,EAAE,EAAE,EAAE,EACN,KAAK,EAAE,KAAK,EACZ,KAAK,EAAE,KAAK,IAAI,EAAE,EAClB,IAAI,EAAE,CAAC,EACP,WAAW,EAAE,WAAW,EACxB,QAAQ,EAAE,QAAQ,EAClB,QAAQ,EAAE,QAAQ,CAAC,wBAAwB,EAC3C,KAAK,EAAE,YAAY,EACnB,QAAQ,EAAE,YAAY,EACtB,OAAO,EAAE,WAAW,EACpB,MAAM,EAAE,UAAU,KACd,SAAS,GACb,CACH,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import React, { type ComponentProps, useCallback } from \"react\";\nimport { useFocus } from \"../../../useFocus.js\";\nimport { autoInput } from \"../../AutoInput.js\";\nimport { useJSONInputController } from \"../../hooks/useJSONInputController.js\";\nimport { type AutoJSONInputProps, type StringOnlyLabel } from \"../../shared/AutoInputTypes.js\";\n\nexport type PolarisWCAutoJSONInputProps = StringOnlyLabel<AutoJSONInputProps> & Partial<ComponentProps<\"s-text-area\">>;\n\n/**\n * A JSON editor within AutoForm using Polaris Web Components.\n * @example\n * ```tsx\n * <AutoForm action={api.modelA.create}>\n *   <AutoJSONInput field=\"fieldA\" label=\"Field A\" />\n * </AutoForm>\n * ```\n * @param props.field - The JSON field API identifier.\n * @param props.label - Label of the JSON editor.\n * @returns The AutoJSONInput component\n */\nexport const PolarisWCAutoJSONInput = autoInput((props: PolarisWCAutoJSONInputProps) => {\n  const { placeholder, disabled, label: _label, ...restProps } = props;\n  const [isFocused, focusProps] = useFocus();\n  const { type: _type, id, errorMessage, label: controllerLabel, metadata, value, onChange } = useJSONInputController(restProps);\n\n  const handleChange = useCallback(\n    (event: Event) => {\n      const target = event.currentTarget as any;\n      onChange(target.value ?? \"\");\n    },\n    [onChange]\n  );\n\n  // Ensure label is always a string\n  const label: string = (props.label ?? String(controllerLabel ?? \"\")) as string;\n  const displayError = !isFocused && errorMessage ? `Invalid JSON: ${errorMessage}` : undefined;\n  const { onFocus, onBlur } = focusProps;\n  const handleFocus = useCallback(\n    (event: Event) => {\n      onFocus?.(event as any);\n    },\n    [onFocus]\n  );\n\n  const handleBlur = useCallback(\n    (event: Event) => {\n      onBlur?.(event as any);\n    },\n    [onBlur]\n  );\n\n  return (\n    <s-text-area\n      id={id}\n      label={label}\n      value={value ?? \"\"}\n      rows={4}\n      placeholder={placeholder}\n      disabled={disabled}\n      required={metadata.requiredArgumentForInput}\n      error={displayError}\n      onChange={handleChange}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      {...restProps}\n    />\n  );\n});\n"]}