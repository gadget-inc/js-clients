{"version":3,"file":"PolarisWCAutoHasOneForm.js","sourceRoot":"","sources":["../../../../../../src/auto/polaris-wc/inputs/relationships/PolarisWCAutoHasOneForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHasOneForm } from \"../../../../useHasOneForm.js\";\nimport { autoRelationshipForm } from \"../../../AutoInput.js\";\nimport { RelationshipContext } from \"../../../hooks/useAutoRelationship.js\";\nimport type { AutoRelationshipFormProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\nimport { PolarisWCEditableOptionLabelButton } from \"./PolarisWCEditableOptionLabelButton.js\";\n\n/**\n * A hasOne field form component for use within <AutoForm></AutoForm> components using Polaris Web Components.\n * This component allows a single related model record to be created, updated, or deleted from the current model.\n * Fields on the related model record are controlled with the nested <AutoInput/> child components.\n *\n * @example\n * ```tsx\n * <AutoForm action={api.car.create}>\n *   <AutoHasOneForm field=\"engine\" >\n *     <AutoInput field=\"horsepower\" />\n *   </AutoHasOneForm>\n * </AutoForm>\n * ```\n * @param props.field - The hasOne field API identifier\n * @param props.label - The label of the hasOne form component\n * @param props.children - The child components to be rendered within the form. This is intended to be used with <AutoInput/> and will be rendered for each child record.\n * @param props.recordLabel - Controls how records on the related model are displayed as options in the relationship field input component.\n *                            When using a string, the string will indicate the field on the related model record to be displayed as the option label.\n *                            When using a function, the function will be called with the record to return a ReactNode to be displayed as the option label\n * @returns The hasOne field form component\n */\nexport const PolarisWCAutoHasOneForm = autoRelationshipForm((props: Omit<AutoRelationshipFormProps, \"recordFilter\">) => {\n  const hasOneForm = useHasOneForm(props);\n  const {\n    isEditing,\n    setIsEditing,\n    isCreatingRecord,\n    pathPrefix,\n    metaDataPathPrefix,\n    hasRecord,\n    recordOption,\n    relatedModelName,\n    confirmEdit,\n    removeRecord,\n    startCreatingRecord,\n  } = hasOneForm;\n\n  return (\n    <>\n      <RelationshipContext.Provider\n        value={{\n          transformPath: (path) => pathPrefix + \".\" + path,\n          transformMetadataPath: (path) => metaDataPathPrefix + \".\" + path,\n        }}\n      >\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"12px\" }}>\n          <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n            {props.label ?? <s-text>{relatedModelName}</s-text>}\n          </div>\n\n          {hasRecord || isCreatingRecord ? (\n            <div\n              style={{\n                border: \"1px solid var(--p-color-border, #dfe3e8)\",\n                borderRadius: \"var(--p-border-radius-200, 8px)\",\n              }}\n            >\n              {!isEditing && recordOption ? (\n                <button\n                  type=\"button\"\n                  onClick={() => setIsEditing(true)}\n                  style={{\n                    display: \"flex\",\n                    width: \"100%\",\n                    padding: \"12px\",\n                    border: \"none\",\n                    background: \"transparent\",\n                    cursor: \"pointer\",\n                    textAlign: \"left\",\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.background = \"var(--p-color-bg-surface-hover, #f9fafb)\";\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.background = \"transparent\";\n                  }}\n                >\n                  <PolarisWCEditableOptionLabelButton option={recordOption} />\n                </button>\n              ) : (\n                <div style={{ padding: \"12px\" }}>\n                  <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"12px\" }}>\n                    {props.children}\n                    <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n                      <s-button tone=\"critical\" onClick={removeRecord}>\n                        Remove\n                      </s-button>\n                      <s-button variant=\"primary\" onClick={confirmEdit}>\n                        Confirm\n                      </s-button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <CreateNewChildButton relatedModelName={relatedModelName} startCreatingRecord={startCreatingRecord} />\n          )}\n        </div>\n      </RelationshipContext.Provider>\n    </>\n  );\n});\n\nconst CreateNewChildButton = (props: { relatedModelName: string; startCreatingRecord: () => void }) => {\n  const { relatedModelName, startCreatingRecord } = props;\n\n  return (\n    <div\n      style={{\n        border: \"1px solid var(--p-color-border, #dfe3e8)\",\n        borderRadius: \"var(--p-border-radius-200, 8px)\",\n      }}\n    >\n      <button\n        type=\"button\"\n        onClick={startCreatingRecord}\n        style={{\n          display: \"flex\",\n          width: \"100%\",\n          padding: \"12px\",\n          border: \"none\",\n          background: \"transparent\",\n          cursor: \"pointer\",\n          textAlign: \"left\",\n          alignItems: \"center\",\n          gap: \"8px\",\n        }}\n        onMouseEnter={(e) => {\n          e.currentTarget.style.background = \"var(--p-color-bg-surface-hover, #f9fafb)\";\n        }}\n        onMouseLeave={(e) => {\n          e.currentTarget.style.background = \"transparent\";\n        }}\n      >\n        <s-icon type=\"plus\" />\n        <s-text>Add {relatedModelName}</s-text>\n      </button>\n    </div>\n  );\n};\n"]}