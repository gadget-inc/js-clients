{"version":3,"file":"PolarisWCAutoButton.js","sourceRoot":"","sources":["../../../../src/auto/polaris-wc/PolarisWCAutoButton.tsx"],"names":[],"mappings":"AAEA,OAAO,KAAK,MAAM,OAAO,CAAC;AAE1B,OAAO,EAAE,uBAAuB,EAAE,MAAM,qCAAqC,CAAC;AAI9E;;;GAGG;AACH,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAKjC,KAAuG,EACvG,EAAE;IACF,MAAM,EAAE,EAAE,EAAE,GAAG,IAAI,EAAE,GAAG,KAAK,CAAC;IAC9B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,aAAa,EAAE,GAAG,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,uBAAuB,CAAC;QAC5F,SAAS,EAAE,CAAC,OAAO,EAAE,EAAE;YACrB,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBACrD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC;YACnD,CAAC;iBAAM,CAAC;gBACN,KAAK,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC;QACD,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC1B,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBACrD,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,0BAA0B,KAAK,CAAC,OAAO,GAAG,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;YACnG,CAAC;iBAAM,CAAC;gBACN,KAAK,CAAC,GAAG,KAAK,0BAA0B,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;YAC5D,CAAC;QACH,CAAC;QACD,GAAG,IAAI;KACR,CAAC,CAAC;IAEH,OAAO,CACL,kCACE,EAAE,EAAE,EAAE,EACN,OAAO,EAAC,SAAS,EACjB,IAAI,EAAE,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,EAC5C,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,EACnC,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAE,GAAG,KACP,WAAmB,IAEvB,KAAK,EAAE,QAAQ,IAAI,KAAK,CAChB,CACZ,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import type { OptionsType } from \"@gadgetinc/client-hooks\";\nimport type { ActionFunction, GlobalActionFunction } from \"@gadgetinc/core\";\nimport React from \"react\";\nimport type { AutoButtonProps } from \"../hooks/useAutoButtonController.js\";\nimport { useAutoButtonController } from \"../hooks/useAutoButtonController.js\";\n\ndeclare let window: any;\n\n/**\n * Render a button that invokes an action when clicked, and shows a toast notification when the action succeeds or encounters an error by default.\n * Uses Polaris Web Components (s-button).\n */\nexport const PolarisWCAutoButton = <\n  GivenOptions extends OptionsType,\n  SchemaT,\n  ActionFunc extends ActionFunction<GivenOptions, any, any, SchemaT, any> | GlobalActionFunction<any>\n>(\n  props: AutoButtonProps<GivenOptions, SchemaT, ActionFunc> & { id?: string; children?: React.ReactNode }\n) => {\n  const { id, ...rest } = props;\n  const { fetching, running, isDestructive, run, label, buttonProps } = useAutoButtonController({\n    onSuccess: (_result) => {\n      if (window && window.shopify && window.shopify.toast) {\n        window.shopify.toast.show(`${label} succeeded.`);\n      } else {\n        alert(`${label} succeeded.`);\n      }\n    },\n    onError: (error, _result) => {\n      if (window && window.shopify && window.shopify.toast) {\n        window.shopify.toast.show(`${label} encountered an error: ${error.message}.`, { isError: true });\n      } else {\n        alert(`${label} encountered an error: ${error.message}.`);\n      }\n    },\n    ...rest,\n  });\n\n  return (\n    <s-button\n      id={id}\n      variant=\"primary\"\n      tone={isDestructive ? \"critical\" : undefined}\n      loading={running ? true : undefined}\n      disabled={fetching}\n      onClick={run}\n      {...(buttonProps as any)}\n    >\n      {props?.children ?? label}\n    </s-button>\n  );\n};\n"]}