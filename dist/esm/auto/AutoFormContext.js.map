{"version":3,"file":"AutoFormContext.js","sourceRoot":"","sources":["../../../src/auto/AutoFormContext.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAwB1C;;GAEG;AAEH,MAAM,CAAC,MAAM,uBAAuB,GAAG,KAAK,CAAC,aAAa,CAAsC,SAAS,CAAC,CAAC;AAC3G;;;IAGI;AAEJ,MAAM,CAAC,MAAM,mBAAmB,GAAG,GAAG,EAAE;IACtC,MAAM,eAAe,GAAG,UAAU,CAAC,uBAAuB,CAAC,CAAC;IAC5D,IAAI,CAAC,eAAe,EAAE,CAAC;QACrB,MAAM,IAAI,KAAK,CACb;;;;yGAImG,CACpG,CAAC;IACJ,CAAC;IAED,OAAO,eAAe,CAAC;AACzB,CAAC,CAAC","sourcesContent":["import React, { useContext } from \"react\";\nimport type { FieldMetadata, GlobalActionMetadata, ModelWithOneActionMetadata } from \"../metadata.js\";\nimport type { RecordIdentifier, UseActionFormSubmit } from \"../use-action-form/types.js\";\n\nexport interface AutoFormSubmitResult {\n  isSuccessful?: boolean;\n  error?: Error;\n  isSubmitting?: boolean;\n}\n\nexport interface AutoFormMetadataContext {\n  findBy?: RecordIdentifier;\n  metadata: ModelWithOneActionMetadata | GlobalActionMetadata | undefined;\n  submit: UseActionFormSubmit<any>;\n  submitResult: AutoFormSubmitResult;\n  model?: {\n    namespace?: string | string[] | null;\n    apiIdentifier?: string;\n  };\n  fields: readonly {\n    path: string;\n    metadata: FieldMetadata;\n  }[];\n}\n/**\n * React context that stores an instance of the metadata loaded for a particular form action\n */\n\nexport const AutoFormMetadataContext = React.createContext<AutoFormMetadataContext | undefined>(undefined);\n/**\n * Get the current `metadata` object and `submit` function from React context\n * Must be called within a component wrapped by the `<AutoForm>` component.\n **/\n\nexport const useAutoFormMetadata = () => {\n  const autoFormContext = useContext(AutoFormMetadataContext);\n  if (!autoFormContext) {\n    throw new Error(\n      `useAutoFormMetadata hook called in context where no AutoFormMetadata context is available. Please ensure you are wrapping this hook with the <AutoForm/> component from @gadgetinc/react.\n\n    Possible remedies:\n      - ensuring you have the <AutoForm/> component wrapped around your hook invocation\n      - ensuring your @gadget-client/<your-app> package and your @gadgetinc/react package are up to date`\n    );\n  }\n\n  return autoFormContext;\n};\n"]}