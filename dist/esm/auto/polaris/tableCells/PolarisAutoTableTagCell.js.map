{"version":3,"file":"PolarisAutoTableTagCell.js","sourceRoot":"","sources":["../../../../../src/auto/polaris/tableCells/PolarisAutoTableTagCell.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAC1D,OAAO,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAEpE,OAAO,EAAE,sBAAsB,EAAE,MAAM,mBAAmB,CAAC;AAE3D,MAAM,eAAe,GAAG,CAAC,CAAC;AAE1B,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,KAAgE,EAAE,EAAE;IAC1G,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;IACxB,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAChD,MAAM,GAAG,GAAG,MAAM,CAAiB,IAAI,CAAC,CAAC;IAEzC,MAAM,EAAE,IAAI,EAAE,cAAc,EAAE,GAAG,OAAO,CAAC,GAAG,EAAE;QAC5C,IAAI,aAAa,GAAa,EAAE,CAAC;QAEjC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;YACzB,IAAI,sBAAsB,CAAC,KAAK,CAAC,EAAE,CAAC;gBAClC,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjD,CAAC;iBAAM,CAAC;gBACN,aAAa,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;YACrD,CAAC;QACH,CAAC;aAAM,CAAC;YACN,aAAa,GAAG,CAAC,KAAK,CAAC,CAAC;QAC1B,CAAC;QAED,OAAO;YACL,IAAI,EAAE,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE,eAAe,CAAC;YAC7C,cAAc,EAAE,aAAa,CAAC,MAAM;SACrC,CAAC;IACJ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,GAAG,CAAC,OAAO,EAAE,CAAC;YAChB,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACjE,CAAC;IACH,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC;IAEX,MAAM,iBAAiB,GAAG,oBAAC,IAAI,IAAC,EAAE,EAAC,MAAM,UAAW,CAAC;IAErD,OAAO,CACL,oBAAC,WAAW,IAAC,GAAG,EAAC,KAAK,EAAC,IAAI,EAAE,KAAK;QAChC,6BACE,KAAK,EAAE;gBACL,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,MAAM;gBAC9C,SAAS,EAAE,QAAQ;aACpB,EACD,GAAG,EAAE,GAAG;YAER,oBAAC,WAAW,IAAC,GAAG,EAAC,KAAK,EAAC,IAAI,EAAE,KAAK;gBAC/B,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CACjB,oBAAC,GAAG,IAAC,GAAG,EAAE,GAAG,IAAG,GAAG,CAAO,CAC3B,CAAC;gBACD,cAAc,GAAG,eAAe,IAAI,iBAAiB,CAC1C,CACV;QACL,QAAQ,IAAI,iBAAiB,CAClB,CACf,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { InlineStack, Tag, Text } from \"@shopify/polaris\";\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport type { RoleAssignmentsValueType } from \"../../../utils.js\";\nimport { isRoleAssignmentsArray } from \"../../../utils.js\";\n\nconst MAX_TAGS_LENGTH = 5;\n\nexport const PolarisAutoTableTagCell = (props: { value: string | string[] | RoleAssignmentsValueType[] }) => {\n  const { value } = props;\n  const [showMore, setShowMore] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n\n  const { tags, originalLength } = useMemo(() => {\n    let formattedTags: string[] = [];\n\n    if (Array.isArray(value)) {\n      if (isRoleAssignmentsArray(value)) {\n        formattedTags = value.map((role) => role.name);\n      } else {\n        formattedTags = value.map((tag) => tag.toString());\n      }\n    } else {\n      formattedTags = [value];\n    }\n\n    return {\n      tags: formattedTags.slice(0, MAX_TAGS_LENGTH),\n      originalLength: formattedTags.length,\n    };\n  }, [value]);\n\n  useEffect(() => {\n    if (ref.current) {\n      setShowMore(ref.current.scrollWidth > ref.current.clientWidth);\n    }\n  }, [tags]);\n\n  const showMoreComponent = <Text as=\"span\">...</Text>;\n\n  return (\n    <InlineStack gap=\"100\" wrap={false}>\n      <div\n        style={{\n          width: showMore ? \"calc(100% - 20px)\" : \"auto\",\n          overflowX: \"hidden\",\n        }}\n        ref={ref}\n      >\n        <InlineStack gap=\"100\" wrap={false}>\n          {tags.map((tag) => (\n            <Tag key={tag}>{tag}</Tag>\n          ))}\n          {originalLength > MAX_TAGS_LENGTH && showMoreComponent}\n        </InlineStack>\n      </div>\n      {showMore && showMoreComponent}\n    </InlineStack>\n  );\n};\n"]}