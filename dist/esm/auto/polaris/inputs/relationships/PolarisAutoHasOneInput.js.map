{"version":3,"file":"PolarisAutoHasOneInput.js","sourceRoot":"","sources":["../../../../../../src/auto/polaris/inputs/relationships/PolarisAutoHasOneInput.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,GAAG,EAAE,MAAM,kBAAkB,CAAC;AACjD,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAClD,OAAO,EAAE,wBAAwB,EAAE,MAAM,4CAA4C,CAAC;AACtF,OAAO,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,sBAAsB,EAAE,MAAM,mCAAmC,CAAC;AAExH,OAAO,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAE/D,MAAM,CAAC,MAAM,sBAAsB,GAAG,SAAS,CAAC,CAAC,KAAiC,EAAE,EAAE;IACpF,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;IACxB,MAAM,EACJ,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjC,mBAAmB,EAAE,EAAE,OAAO,EAAE,mBAAmB,EAAE,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,EACvF,cAAc,EACd,YAAY,EACZ,SAAS,EACT,cAAc,EACd,cAAc,GACf,GAAG,wBAAwB,CAAC,KAAK,CAAC,CAAC;IAEpC,MAAM,WAAW,GAAG,sBAAsB,CAAC,KAAK,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC;IAErE,MAAM,cAAc,GAAG,cAAc,CAAC,CAAC,CAAC,iBAAiB,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAE9F,MAAM,iBAAiB,GAAG,cAAc,CAAC,CAAC,CAAC,CACzC,oBAAC,GAAG,IAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,cAAc,IAAI,cAAc,CAAC,cAAc,CAAC,EAAE,GAAG,EAAE,qBAAqB,cAAc,CAAC,EAAE,EAAE;QAClH,2BAAG,EAAE,EAAE,GAAG,cAAc,CAAC,EAAE,IAAI,cAAc,CAAC,KAAK,EAAE,IAAG,cAAc,CAAC,KAAK,CAAK,CAC7E,CACP,CAAC,CAAC,CAAC,IAAI,CAAC;IAET,OAAO,CACL;QACE,oBAAC,QAAQ,IACP,SAAS,EACP,oBAAC,QAAQ,CAAC,SAAS,IACjB,QAAQ,EAAE,MAAM,CAAC,GAAG,EACpB,KAAK,EAAE,MAAM,CAAC,KAAK,EACnB,KAAK,EAAE,QAAQ,CAAC,IAAI,EACpB,IAAI,EAAE,IAAI,EACV,WAAW,EAAC,QAAQ,EACpB,YAAY,EAAC,KAAK,EAClB,eAAe,EAAE,iBAAiB,GAClC,EAEJ,kBAAkB,EAAE,UAAU,CAAC,YAAY,EAC3C,mBAAmB,EAAE,UAAU,CAAC,WAAW,IAAI,OAAO,CAAC,MAAM,IAAI,wBAAwB;YAEzF,oBAAC,mBAAmB,IAClB,SAAS,EAAE,SAAS,EACpB,YAAY,EAAE,YAAY,EAC1B,aAAa,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,cAAc,EAAE,EAAE,KAAK,EAAE,EAChD,QAAQ,EAAE,cAAc,EACxB,OAAO,EAAE,YAAY,CAAC,OAAO,EAC7B,OAAO,EAAE,mBAAmB,GAC5B,CACO,CACV,CACJ,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import { Combobox, Tag } from \"@shopify/polaris\";\nimport React from \"react\";\nimport { autoInput } from \"../../../AutoInput.js\";\nimport { useHasOneInputController } from \"../../../hooks/useHasOneInputController.js\";\nimport { getRecordAsOption, optionRecordsToLoadCount, useOptionLabelForField } from \"../../../hooks/useRelatedModel.js\";\nimport type { AutoRelationshipInputProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\nimport { RelatedModelOptions } from \"./RelatedModelOptions.js\";\n\nexport const PolarisAutoHasOneInput = autoInput((props: AutoRelationshipInputProps) => {\n  const { field } = props;\n  const {\n    fieldMetadata: { path, metadata },\n    relatedModelOptions: { options, searchFilterOptions, search, pagination, relatedModel },\n    selectedRecord,\n    errorMessage,\n    isLoading,\n    onSelectRecord,\n    onRemoveRecord,\n  } = useHasOneInputController(props);\n\n  const optionLabel = useOptionLabelForField(field, props.optionLabel);\n\n  const selectedOption = selectedRecord ? getRecordAsOption(selectedRecord, optionLabel) : null;\n\n  const selectedRecordTag = selectedOption ? (\n    <Tag onRemove={() => selectedRecord && onRemoveRecord(selectedRecord)} key={`selectedRecordTag_${selectedOption.id}`}>\n      <p id={`${selectedOption.id}_${selectedOption.label}`}>{selectedOption.label}</p>\n    </Tag>\n  ) : null;\n\n  return (\n    <>\n      <Combobox\n        activator={\n          <Combobox.TextField\n            onChange={search.set}\n            value={search.value}\n            label={metadata.name}\n            name={path}\n            placeholder=\"Search\"\n            autoComplete=\"off\"\n            verticalContent={selectedRecordTag}\n          />\n        }\n        onScrolledToBottom={pagination.loadNextPage}\n        willLoadMoreOptions={pagination.hasNextPage && options.length >= optionRecordsToLoadCount}\n      >\n        <RelatedModelOptions\n          isLoading={isLoading}\n          errorMessage={errorMessage}\n          checkSelected={(id) => selectedRecord?.id === id}\n          onSelect={onSelectRecord}\n          records={relatedModel.records}\n          options={searchFilterOptions}\n        />\n      </Combobox>\n    </>\n  );\n});\n"]}