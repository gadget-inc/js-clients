{"version":3,"file":"PolarisAutoHasManyInput.js","sourceRoot":"","sources":["../../../../../../src/auto/polaris/inputs/relationships/PolarisAutoHasManyInput.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAC1D,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AACpD,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,yBAAyB,EAAE,MAAM,6CAA6C,CAAC;AACxF,OAAO,EAAE,wBAAwB,EAAE,MAAM,0CAA0C,CAAC;AAEpF,OAAO,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAC/D,OAAO,EAAE,4BAA4B,EAAE,MAAM,gCAAgC,CAAC;AAE9E,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,KAAiC,EAAE,EAAE;IAC3E,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;IAExB,MAAM,EACJ,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjC,mBAAmB,EAAE,EAAE,OAAO,EAAE,mBAAmB,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,EAEnF,iBAAiB,EACjB,YAAY,EACZ,SAAS,EAET,cAAc,EACd,cAAc,GACf,GAAG,yBAAyB,CAAC,KAAK,CAAC,CAAC;IAErC,IAAK,QAAQ,CAAC,OAAmC,EAAE,WAAW,EAAE,CAAC;QAC/D,OAAO,oBAAC,MAAM,IAAC,IAAI,EAAC,SAAS,IAAE,gCAAgC,KAAK,eAAe,CAAU,CAAC;IAChG,CAAC;IAED,OAAO,CACL;QACE,oBAAC,QAAQ,IACP,SAAS,EACP,oBAAC,QAAQ,CAAC,SAAS,IACjB,MAAM,EAAE,oBAAC,IAAI,IAAC,MAAM,EAAE,UAAU,GAAI,EACpC,QAAQ,EAAE,MAAM,CAAC,GAAG,EACpB,KAAK,EAAE,MAAM,CAAC,KAAK,EACnB,KAAK,EAAE,QAAQ,CAAC,IAAI,EACpB,IAAI,EAAE,IAAI,EACV,WAAW,EAAC,QAAQ,EACpB,YAAY,EAAC,KAAK,EAClB,eAAe,EAAE,4BAA4B,CAAC;oBAC5C,iBAAiB;oBACjB,cAAc;oBACd,OAAO;iBACR,CAAC,GACF,EAEJ,kBAAkB,EAAE,UAAU,CAAC,YAAY,EAC3C,aAAa,QACb,mBAAmB,EAAE,UAAU,CAAC,WAAW,IAAI,OAAO,CAAC,MAAM,IAAI,wBAAwB;YAEzF,oBAAC,mBAAmB,IAClB,QAAQ,EAAE,cAAc,EACxB,OAAO,EAAE,mBAAmB,EAC5B,aAAa,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC,EACrD,YAAY,EAAE,YAAY,EAC1B,SAAS,EAAE,SAAS,GACpB,CACO,CACV,CACJ,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { GadgetRecordList } from \"@gadgetinc/api-client-core\";\nimport { Banner, Combobox, Icon } from \"@shopify/polaris\";\nimport { SearchIcon } from \"@shopify/polaris-icons\";\nimport React from \"react\";\nimport { useHasManyInputController } from \"../../../hooks/useHasManyInputController.js\";\nimport { optionRecordsToLoadCount } from \"../../../hooks/useRelatedModelOptions.js\";\nimport { AutoRelationshipInputProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\nimport { RelatedModelOptions } from \"./RelatedModelOptions.js\";\nimport { getSelectedRelatedRecordTags } from \"./SelectedRelatedRecordTags.js\";\n\nexport const PolarisAutoHasManyInput = (props: AutoRelationshipInputProps) => {\n  const { field } = props;\n\n  const {\n    fieldMetadata: { path, metadata },\n    relatedModelOptions: { options, searchFilterOptions, selected, search, pagination },\n\n    selectedRecordIds,\n    errorMessage,\n    isLoading,\n\n    onSelectRecord,\n    onRemoveRecord,\n  } = useHasManyInputController(props);\n\n  if ((selected.records as GadgetRecordList<never>)?.hasNextPage) {\n    return <Banner tone=\"warning\">{`Too many related records for ${field}. Cannot edit`}</Banner>;\n  }\n\n  return (\n    <>\n      <Combobox\n        activator={\n          <Combobox.TextField\n            prefix={<Icon source={SearchIcon} />}\n            onChange={search.set}\n            value={search.value}\n            label={metadata.name}\n            name={path}\n            placeholder=\"Search\"\n            autoComplete=\"off\"\n            verticalContent={getSelectedRelatedRecordTags({\n              selectedRecordIds,\n              onRemoveRecord,\n              options,\n            })}\n          />\n        }\n        onScrolledToBottom={pagination.loadNextPage}\n        allowMultiple\n        willLoadMoreOptions={pagination.hasNextPage && options.length >= optionRecordsToLoadCount}\n      >\n        <RelatedModelOptions\n          onSelect={onSelectRecord}\n          options={searchFilterOptions}\n          checkSelected={(id) => selectedRecordIds.includes(id)}\n          errorMessage={errorMessage}\n          isLoading={isLoading}\n        />\n      </Combobox>\n    </>\n  );\n};\n"]}