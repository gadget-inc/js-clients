{"version":3,"file":"useAuth.js","sourceRoot":"","sources":["../../../src/auth/useAuth.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAGnC,OAAO,EAAE,0BAA0B,EAAE,MAAM,sBAAsB,CAAC;AAElE,OAAO,EAAE,UAAU,EAAE,MAAM,iBAAiB,CAAC;AAC7C,OAAO,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAEvC;;;GAGG;AACH,MAAM,CAAC,MAAM,OAAO,GAAG,CAUrB,MAAe,EA8Bf,EAAE;IACF,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;IACnC,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;IAC7B,MAAM,OAAO,GAAG,UAAU,CAAC,0BAA0B,CAAC,CAAC;IAEvD,IAAI,CAAC,OAAO,EAAE;QACZ,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAC;KACjE;IAED,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC,IAAI,EAAE,aAAa,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC;AAC5E,CAAC,CAAC","sourcesContent":["import type { DefaultSelection, GadgetRecord, Select } from \"@gadgetinc/api-client-core\";\nimport { useContext } from \"react\";\nimport type { OptionsType, ReadOperationOptions } from \"src/utils\";\nimport type { GadgetAuthConfiguration } from \"../GadgetProvider.js\";\nimport { GadgetConfigurationContext } from \"../GadgetProvider.js\";\nimport type { ClientWithSessionAndUserManagers, GadgetSession, GadgetUser } from \"./useSession.js\";\nimport { useSession } from \"./useSession.js\";\nimport { useUser } from \"./useUser.js\";\n\n/**\n * Used for fetching the current authentication state of the session\n * @returns An object with the current authentication state: `session`, `user`, and `isSignedIn`\n */\nexport const useAuth = <\n  SessionGivenOptions extends OptionsType,\n  SessionSchemaT,\n  UserGivenOptions extends OptionsType,\n  UserSchemaT,\n  SessionOptions extends Client[\"currentSession\"][\"get\"][\"optionsType\"] & ReadOperationOptions,\n  UserOptions extends Client[\"user\"][\"findMany\"][\"optionsType\"] & ReadOperationOptions,\n  Client extends ClientWithSessionAndUserManagers<SessionGivenOptions, SessionSchemaT, UserGivenOptions, UserSchemaT>,\n  ClientType extends Client | undefined\n>(\n  client?: Client\n): {\n  session:\n    | GadgetRecord<\n        Select<\n          Exclude<Exclude<ClientType, undefined>[\"currentSession\"][\"get\"][\"schemaType\"], null | undefined>,\n          DefaultSelection<\n            Exclude<ClientType, undefined>[\"currentSession\"][\"get\"][\"selectionType\"],\n            SessionOptions,\n            Exclude<ClientType, undefined>[\"currentSession\"][\"get\"][\"defaultSelection\"] & {\n              user: Exclude<ClientType, undefined>[\"user\"][\"findMany\"][\"defaultSelection\"];\n            }\n          >\n        >\n      >\n    | GadgetSession;\n  user:\n    | GadgetRecord<\n        Select<\n          Exclude<Exclude<ClientType, undefined>[\"user\"][\"findMany\"][\"schemaType\"], null | undefined>,\n          DefaultSelection<\n            Exclude<ClientType, undefined>[\"user\"][\"findMany\"][\"selectionType\"],\n            UserOptions,\n            Exclude<ClientType, undefined>[\"user\"][\"findMany\"][\"defaultSelection\"]\n          >\n        >\n      >\n    | GadgetUser;\n  isSignedIn: boolean;\n  configuration: GadgetAuthConfiguration;\n} => {\n  const session = useSession(client);\n  const user = useUser(client);\n  const context = useContext(GadgetConfigurationContext);\n\n  if (!context) {\n    throw new Error(\"useAuth must be used within a GadgetProvider\");\n  }\n\n  return { session, user, isSignedIn: !!user, configuration: context.auth };\n};\n"]}