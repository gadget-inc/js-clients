{"version":3,"file":"useMaybeFindFirst.js","sourceRoot":"","sources":["../../src/useMaybeFindFirst.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAElD,OAAO,EAAE,YAAY,EAAE,MAAM,YAAY,CAAC;AAE1C,IAAI,qBAAqB,GAAsB,cAAc,CAAC,mBAAmB,CAAC,CAAC;AAEnF,cAAc,CAAC,mBAAmB,EAAE,CAAC,OAAuB,EAAE,SAAoB,EAAE,EAAE;IACpF,qBAAqB,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;QAC3C,MAAM,YAAY,GAAG,EAAE,GAAG,OAAO,EAAE,KAAK,EAAE,CAAC,EAA+B,CAAC;QAC3E,MAAM,eAAe,GAAG,SAAS,CAAC,iBAAiB,CAAC,YAAY,CAAC,CAAC;QAClE,MAAM,IAAI,GAAG,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE;YAC1C,OAAO,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACjD,CAAC,EAAE,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC,CAAC;QAE/B,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC,GAAG,SAAS,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,CAAC;QAExF,MAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,EAAE;YAC5C,OAAO,EAAE,GAAG,SAAS,EAAE,GAAG,OAAO,CAAC,SAAS,CAAC,aAAa,CAAC,SAAS,EAAE,EAAE,KAAK,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAC5G,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;QAEjD,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC3B,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,iBAAiB,GAAsB,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE,CAAC,qBAAqB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC","sourcesContent":["import type { RuntimeAdapter } from \"./adapter.js\";\nimport { createHookStub } from \"./createHooks.js\";\nimport type { CoreHooks, UseMaybeFindFirst } from \"./types.js\";\nimport { useQueryArgs } from \"./utils.js\";\n\nlet useMaybeFindFirstImpl: UseMaybeFindFirst = createHookStub(\"useMaybeFindFirst\");\n\ncreateHookStub(\"useMaybeFindFirst\", (adapter: RuntimeAdapter, coreHooks: CoreHooks) => {\n  useMaybeFindFirstImpl = (manager, options) => {\n    const firstOptions = { ...options, first: 1 } as unknown as typeof options;\n    const memoizedOptions = coreHooks.useStructuralMemo(firstOptions);\n    const plan = adapter.framework.useMemo(() => {\n      return manager.findFirst.plan(memoizedOptions);\n    }, [manager, memoizedOptions]);\n\n    const [rawResult, refresh] = coreHooks.useGadgetQuery(useQueryArgs(plan, firstOptions));\n\n    const result = adapter.framework.useMemo(() => {\n      return { ...rawResult, ...manager.findFirst.processResult(rawResult, { pause: memoizedOptions?.pause }) };\n    }, [rawResult, manager, memoizedOptions?.pause]);\n\n    return [result, refresh];\n  };\n});\n\nexport const useMaybeFindFirst: UseMaybeFindFirst = (manager, options) => useMaybeFindFirstImpl(manager, options);\n"]}