{"version":3,"file":"SignedInOrRedirect.js","sourceRoot":"","sources":["../../../../src/components/auth/SignedInOrRedirect.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA,+CAA+D;AAC/D,gEAAyE;AACzE,gDAA6C;AAE7C;;GAEG;AACI,MAAM,kBAAkB,GAAG,CAAC,KAA8B,EAAE,EAAE;IACnE,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,IAAA,gBAAQ,EAAC,KAAK,CAAC,CAAC;IAEpD,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,iBAAO,GAAE,CAAC;IACvC,MAAM,OAAO,GAAG,IAAA,kBAAU,EAAC,2CAA0B,CAAC,CAAC;IACvD,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,IAAI,EAAE,CAAC;IAE/B,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,EAAE;YACjD,aAAa,CAAC,IAAI,CAAC,CAAC;YACpB,MAAM,WAAW,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACrE,WAAW,CAAC,YAAY,CAAC,GAAG,CAAC,YAAY,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACrE,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC,CAAC;SAChD;IACH,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;IAEnC,IAAI,IAAI,IAAI,UAAU,EAAE;QACtB,OAAO,8DAAG,KAAK,CAAC,QAAQ,CAAI,CAAC;KAC9B;SAAM;QACL,OAAO,IAAI,CAAC;KACb;AACH,CAAC,CAAC;AArBW,QAAA,kBAAkB,sBAqB7B","sourcesContent":["import type { ReactNode } from \"react\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { GadgetConfigurationContext } from \"../../../src/GadgetProvider\";\nimport { useAuth } from \"../../auth/useAuth\";\n\n/**\n * Renders its `children` if the current `Session` is signed in, otherwise redirects the browser to the `signInPath` configured in the `Provider`. Uses `window.location.assign` to perform the redirect.\n */\nexport const SignedInOrRedirect = (props: { children: ReactNode }) => {\n  const [redirected, setRedirected] = useState(false);\n\n  const { user, isSignedIn } = useAuth();\n  const context = useContext(GadgetConfigurationContext);\n  const { auth } = context ?? {};\n\n  useEffect(() => {\n    if (auth && !redirected && (!isSignedIn || !user)) {\n      setRedirected(true);\n      const redirectUrl = new URL(auth.signInPath, window.location.origin);\n      redirectUrl.searchParams.set(\"redirectTo\", window.location.pathname);\n      window.location.assign(redirectUrl.toString());\n    }\n  }, [redirected, isSignedIn, auth]);\n\n  if (user && isSignedIn) {\n    return <>{props.children}</>;\n  } else {\n    return null;\n  }\n};\n"]}