{"version":3,"file":"Provider.js","sourceRoot":"","sources":["../../../src/react/Provider.tsx"],"names":[],"mappings":";;;;AACA,4CAAmE;AAEnE,uDAAmD;AACnD,0CAAwE;AACxE,yCAA6D;AAMtD,MAAM,QAAQ,GAAG,CAAC,EAAE,GAAG,EAAE,YAAY,EAAE,QAAQ,EAAuE,EAAE,EAAE;IAC/H,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,IAAA,gBAAQ,EAAC,KAAK,CAAC,CAAC;IAE1C,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAA,oDAAyC,EAAC,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;QACjE,QAAQ,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,EAAE,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,CAAC;IAExB,OAAO,CACL,8BAAC,gBAAmB,IAAC,GAAG,EAAE,GAAG;QAC3B,8BAAC,0CAA+B,CAAC,QAAQ,IAAC,KAAK,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,IAAG,QAAQ,CAA4C,CAClG,CACvB,CAAC;AACJ,CAAC,CAAC;AAbW,QAAA,QAAQ,YAanB","sourcesContent":["import type { AnyClient } from \"@gadgetinc/core\";\nimport { Provider as GadgetReactProvider } from \"@gadgetinc/react\";\nimport type { ReactNode } from \"react\";\nimport React, { useEffect, useState } from \"react\";\nimport { registerShopifySessionTokenAuthentication } from \"../index.js\";\nimport { GadgetShopifyUIExtensionContext } from \"./index.js\";\n\nexport interface SessionToken {\n  get: () => Promise<string>;\n}\n\nexport const Provider = ({ api, sessionToken, children }: { api: AnyClient; sessionToken: SessionToken; children: ReactNode }) => {\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    registerShopifySessionTokenAuthentication(api, sessionToken.get);\n    setReady(true);\n  }, [api, sessionToken]);\n\n  return (\n    <GadgetReactProvider api={api}>\n      <GadgetShopifyUIExtensionContext.Provider value={{ api, ready }}>{children}</GadgetShopifyUIExtensionContext.Provider>\n    </GadgetReactProvider>\n  );\n};\n"]}