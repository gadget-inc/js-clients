{"version":3,"file":"Provider.js","sourceRoot":"","sources":["../../../src/preact/Provider.tsx"],"names":[],"mappings":";;;AACA,8CAAqE;AAErE,mCAA2B;AAC3B,wCAAmD;AACnD,0CAAwE;AACxE,6CAA+D;AAMxD,MAAM,QAAQ,GAAG,CAAC,EAAE,GAAG,EAAE,YAAY,EAAE,QAAQ,EAA+E,EAAE,EAAE;IACvI,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,IAAA,gBAAQ,EAAC,KAAK,CAAC,CAAC;IAE1C,IAAA,iBAAS,EAAC,GAAG,EAAE;QACb,IAAA,oDAAyC,EAAC,GAAG,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC;QACjE,QAAQ,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,EAAE,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,CAAC;IAExB,OAAO,IAAA,UAAC,EAAC,iBAAoB,EAAE,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAA,UAAC,EAAC,4CAA+B,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;AACtI,CAAC,CAAC;AATW,QAAA,QAAQ,YASnB","sourcesContent":["import type { AnyClient } from \"@gadgetinc/core\";\nimport { Provider as GadgetPreactProvider } from \"@gadgetinc/preact\";\nimport type { ComponentChildren } from \"preact\";\nimport { h } from \"preact\";\nimport { useEffect, useState } from \"preact/hooks\";\nimport { registerShopifySessionTokenAuthentication } from \"../index.js\";\nimport { GadgetShopifyUIExtensionContext } from \"./context.js\";\n\nexport interface SessionToken {\n  get: () => Promise<string>;\n}\n\nexport const Provider = ({ api, sessionToken, children }: { api: AnyClient; sessionToken: SessionToken; children: ComponentChildren }) => {\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    registerShopifySessionTokenAuthentication(api, sessionToken.get);\n    setReady(true);\n  }, [api, sessionToken]);\n\n  return h(GadgetPreactProvider, { api, children: h(GadgetShopifyUIExtensionContext.Provider, { value: { api, ready }, children }) });\n};\n"]}