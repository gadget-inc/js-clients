{"version":3,"file":"metadata.js","sourceRoot":"","sources":["../../src/metadata.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ActionFunction, AnyClient, GlobalActionFunction } from \"@gadgetinc/api-client-core\";\nimport { assert } from \"@gadgetinc/api-client-core\";\nimport type { ResultOf } from \"@graphql-typed-document-node/core\";\nimport type { DocumentNode } from \"graphql\";\nimport { useApi } from \"./GadgetProvider.js\";\nimport { graphql } from \"./internal/gql/gql.js\";\nimport { GadgetFieldType, type FieldMetadataFragment as FieldMetadataFragmentType } from \"./internal/gql/graphql.js\";\nimport { useGadgetQuery } from \"./useGadgetQuery.js\";\nimport { ErrorWrapper, getModelManager } from \"./utils.js\";\n\n/**\n * The enum of all possible field types in Gadget's type system\n * @internal\n */\nexport const FieldType = GadgetFieldType;\n\ntype WithRequired<T, K extends keyof T> = T & { [P in K]-?: Exclude<T[P], null> };\ntype Clarify<T> = T extends Record<string, unknown> ? { [Key in keyof T]: T[Key] } : T;\n\nconst _RelatedModelFieldFragment = graphql(/* GraphQL */ `\n  fragment RelatedModelFieldFragmentDepth3 on GadgetModelField {\n    ...BaseFieldMetadata\n    __typename\n  }\n\n  fragment RelatedModelFieldFragmentDepth2 on GadgetModelField {\n    ...BaseFieldMetadata\n    configuration {\n      ... on GadgetHasManyThroughConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth3\n            __typename\n          }\n        }\n      }\n      ... on GadgetHasManyConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth3\n            __typename\n          }\n        }\n      }\n      ... on GadgetHasOneConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth3\n            __typename\n          }\n        }\n      }\n      ... on GadgetBelongsToConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth3\n            __typename\n          }\n        }\n      }\n    }\n    __typename\n  }\n\n  fragment RelatedModelFieldFragment on GadgetModelField {\n    ...BaseFieldMetadata\n    configuration {\n      ... on GadgetHasManyThroughConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth2\n            __typename\n          }\n        }\n      }\n      ... on GadgetHasManyConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth2\n            __typename\n          }\n        }\n      }\n      ... on GadgetHasOneConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth2\n            __typename\n          }\n        }\n      }\n      ... on GadgetBelongsToConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragmentDepth2\n            __typename\n          }\n        }\n      }\n    }\n    __typename\n  }\n`);\n\nconst FieldMetadataFragment = graphql(/* GraphQL */ `\n  fragment BaseFieldMetadata on GadgetField {\n    name\n    apiIdentifier\n    fieldType\n    requiredArgumentForInput\n    ... on GadgetModelField {\n      sortable\n      filterable\n    }\n    configuration {\n      __typename\n      fieldType\n      validations {\n        __typename\n        ... on GadgetRegexFieldValidation {\n          name\n          specID\n          pattern\n        }\n        ... on GadgetRangeFieldValidation {\n          name\n          specID\n          min\n          max\n        }\n        ... on GadgetOnlyImageFileFieldValidation {\n          name\n          specID\n          allowAnimatedImages\n        }\n        ... on GadgetGenericFieldValidation {\n          name\n          specID\n        }\n      }\n      ... on GadgetHasManyThroughConfig {\n        relatedModel {\n          key\n          apiIdentifier\n          namespace\n          defaultDisplayField {\n            name\n            apiIdentifier\n            fieldType\n          }\n        }\n        inverseField {\n          apiIdentifier\n        }\n        joinModel {\n          key\n          apiIdentifier\n          namespace\n          defaultDisplayField {\n            name\n            apiIdentifier\n            fieldType\n          }\n        }\n        inverseJoinModelField {\n          apiIdentifier\n        }\n        inverseRelatedModelField {\n          apiIdentifier\n        }\n      }\n      ... on GadgetHasManyConfig {\n        isJoinModelHasManyField\n        relatedModel {\n          key\n          name\n          apiIdentifier\n          namespace\n          defaultDisplayField {\n            name\n            apiIdentifier\n            fieldType\n          }\n        }\n        inverseField {\n          apiIdentifier\n        }\n      }\n      ... on GadgetHasOneConfig {\n        relatedModel {\n          key\n          apiIdentifier\n          namespace\n          defaultDisplayField {\n            name\n            apiIdentifier\n            fieldType\n          }\n        }\n        inverseField {\n          apiIdentifier\n        }\n      }\n      ... on GadgetBelongsToConfig {\n        relatedModel {\n          key\n          apiIdentifier\n          namespace\n          defaultDisplayField {\n            name\n            apiIdentifier\n            fieldType\n          }\n        }\n      }\n      ... on GadgetEnumConfig {\n        allowMultiple\n        allowOther\n        options {\n          name\n          color\n        }\n      }\n      ... on GadgetDateTimeConfig {\n        includeTime\n      }\n      ... on GadgetNumberConfig {\n        decimals\n      }\n    }\n  }\n\n  fragment FieldMetadata on GadgetField {\n    ...BaseFieldMetadata\n    configuration {\n      ... on GadgetHasManyThroughConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragment\n          }\n        }\n      }\n      ... on GadgetHasManyConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragment\n          }\n        }\n      }\n      ... on GadgetHasOneConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragment\n          }\n        }\n      }\n      ... on GadgetBelongsToConfig {\n        relatedModel {\n          fields @include(if: $includeRelatedFields) {\n            ...RelatedModelFieldFragment\n          }\n        }\n      }\n    }\n  }\n`);\n\nconst ModelMetadataQuery = graphql(/* GraphQL */ `\n  query GetModelMetadata($apiIdentifier: String!, $namespace: [String!], $includeRelatedFields: Boolean!) {\n    gadgetMeta {\n      model(apiIdentifier: $apiIdentifier, namespace: $namespace) {\n        apiIdentifier\n        namespace\n        name\n        fields {\n          ...FieldMetadata\n        }\n      }\n    }\n  }\n`);\n\nconst _SubFieldsFragment = graphql(/* GraphQL */ `\n  fragment SubFields on GadgetField {\n    configuration {\n      __typename\n      ... on GadgetObjectFieldConfig {\n        name\n        fields {\n          ...BaseFieldMetadata\n          configuration {\n            __typename\n            ... on GadgetObjectFieldConfig {\n              name\n              fields {\n                ...BaseFieldMetadata\n                configuration {\n                  __typename\n                  ... on GadgetObjectFieldConfig {\n                    name\n                    fields {\n                      ...BaseFieldMetadata\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`);\n\nconst ModelActionMetadataQuery = graphql(/* GraphQL */ `\n  query ModelActionMetadata($modelApiIdentifier: String!, $modelNamespace: [String!], $action: String!, $includeRelatedFields: Boolean!) {\n    gadgetMeta {\n      model(apiIdentifier: $modelApiIdentifier, namespace: $modelNamespace) {\n        name\n        apiIdentifier\n        defaultRecord\n        action(apiIdentifier: $action) {\n          name\n          apiIdentifier\n          operatesWithRecordIdentity\n          isDeleteAction\n          inputFields {\n            ...FieldMetadata\n            ...SubFields\n          }\n          triggers {\n            specID\n          }\n        }\n      }\n    }\n  }\n`);\n\n/**\n * Global actions don't have related fields, but $includeRelatedFields needed for the fragment\n */\nconst GlobalActionMetadataQuery = graphql(/* GraphQL */ `\n  query GlobalActionMetadata($apiIdentifier: String!, $namespace: [String!], $includeRelatedFields: Boolean = false) {\n    gadgetMeta {\n      globalAction(apiIdentifier: $apiIdentifier, namespace: $namespace) {\n        name\n        apiIdentifier\n        inputFields {\n          ...FieldMetadata\n          ...SubFields\n        }\n        triggers {\n          specID\n        }\n      }\n    }\n  }\n`);\n\nconst RolesMetadataQuery = graphql(/* GraphQL */ `\n  query RolesMetadata {\n    gadgetMeta {\n      roles {\n        name\n        key\n        selectable\n      }\n    }\n  }\n`);\n\nexport type ModelMetadata = Exclude<ResultOf<typeof ModelMetadataQuery>[\"gadgetMeta\"][\"model\"], null | undefined>;\nexport type ActionMetadata = Clarify<\n  WithRequired<Exclude<ResultOf<typeof ModelActionMetadataQuery>[\"gadgetMeta\"][\"model\"], null | undefined>, \"action\">\n>;\nexport type GlobalActionMetadata = Clarify<\n  Exclude<ResultOf<typeof GlobalActionMetadataQuery>[\"gadgetMeta\"][\"globalAction\"], null | undefined>\n>;\n\nexport type FieldMetadata = FieldMetadataFragmentType;\n\n/**\n * Retrieve a given Gadget model's metadata from the backend\n * @internal\n */\nexport const useModelMetadata = (apiIdentifier: string, namespace: string[]) => {\n  const [{ data, fetching, error }] = useGadgetQuery({\n    query: ModelMetadataQuery,\n    variables: {\n      apiIdentifier,\n      namespace,\n      includeRelatedFields: true,\n    },\n  });\n\n  return {\n    metadata: data ? assert(data.gadgetMeta.model, \"no model metadata found from Gadget API\") : data,\n    fetching,\n    error: error ? ErrorWrapper.forClientSideError(error) : undefined,\n  };\n};\n\nconst getGlobalActionApiIdentifier = (api: AnyClient, fn: GlobalActionFunction<any>) => {\n  let cursor: any = api;\n  if (fn.namespace) {\n    for (const segment of Array.isArray(fn.namespace) ? fn.namespace : [fn.namespace]) {\n      cursor = cursor[segment];\n    }\n  }\n  for (const [key, value] of Object.entries(cursor)) {\n    if (value === fn) {\n      return key;\n    }\n  }\n  throw new Error(\"global action function not found on model manager\");\n};\n\n/**\n * Retrieve a given Gadget model action's metadata from the backend\n * @internal\n */\nexport const useActionMetadata = (\n  actionFunction: ActionFunction<any, any, any, any, any> | GlobalActionFunction<any>\n): { metadata: ActionMetadata | GlobalActionMetadata | undefined; fetching: boolean; error: ErrorWrapper | undefined } => {\n  const api = useApi();\n\n  let query: DocumentNode;\n  let variables: Record<string, any>;\n\n  if (actionFunction.type === \"globalAction\") {\n    query = GlobalActionMetadataQuery;\n    variables = {\n      apiIdentifier: getGlobalActionApiIdentifier(api, actionFunction),\n      namespace: actionFunction.namespace,\n      includeRelatedFields: false,\n    };\n  } else if (actionFunction.type === \"action\") {\n    query = ModelActionMetadataQuery;\n    const modelManager = assert(\n      getModelManager(api, actionFunction.modelApiIdentifier, actionFunction.namespace),\n      \"no model manager found for action function\"\n    );\n    let actionName;\n    const proto = Object.getPrototypeOf(modelManager);\n    for (const [key, value] of Object.entries(proto)) {\n      if (value === actionFunction) {\n        actionName = key;\n        break;\n      }\n    }\n    if (!actionName) {\n      throw new Error(\"action function not found on model manager\");\n    }\n    variables = {\n      modelApiIdentifier: actionFunction.modelApiIdentifier,\n      modelNamespace: actionFunction.namespace,\n      action: actionName,\n      includeRelatedFields: true,\n    };\n  } else {\n    throw new Error(`Invalid action function type`);\n  }\n\n  const [{ data, fetching, error }] = useGadgetQuery({\n    query,\n    variables,\n  });\n\n  let metadata: ActionMetadata | GlobalActionMetadata | undefined = undefined;\n\n  if (data && !error) {\n    if (actionFunction.type === \"globalAction\") {\n      metadata = assert(data.gadgetMeta.globalAction, \"no global action metadata found from Gadget API\");\n    } else {\n      metadata = data.gadgetMeta.model as ActionMetadata;\n      assert(metadata?.action, \"no model metadata found from Gadget API\");\n    }\n  }\n\n  return {\n    metadata,\n    fetching,\n    error: error ? ErrorWrapper.forClientSideError(error) : undefined,\n  };\n};\n\n/**\n * @internal\n */\nexport const buildAutoFormFieldList = (\n  fields: FieldMetadata[] | undefined,\n  options?: { include?: string[]; exclude?: string[]; isUpsertAction?: boolean }\n): [string, FieldMetadata][] => {\n  if (!fields) {\n    return [];\n  }\n\n  let subset: [string, FieldMetadata][] = fields.map((field) => [field.apiIdentifier, field]);\n\n  if (options?.include && options?.exclude) {\n    throw new Error(\"Cannot use both 'include' and 'exclude' options at the same time\");\n  }\n  if (options?.include) {\n    // When including fields, the order will match the order of the `include` array\n    subset = [];\n    const includes = new Set(options.include);\n\n    const includeGroups: Record<string, string[]> = {};\n\n    for (const path of Array.from(includes)) {\n      const [rootSegment, ...childSegments] = path.split(\".\");\n\n      includeGroups[rootSegment] ??= [];\n\n      if (childSegments.length) {\n        includeGroups[rootSegment].push(childSegments.join(\".\"));\n      }\n    }\n\n    for (const [rootApiIdentifier, childIdentifiers] of Object.entries(includeGroups)) {\n      const metadataField = fields.find((field) => field.apiIdentifier === rootApiIdentifier);\n      if (metadataField) {\n        subset.push([rootApiIdentifier, metadataField]);\n\n        if (\n          childIdentifiers.length > 0 &&\n          \"relatedModel\" in metadataField.configuration &&\n          metadataField.configuration.relatedModel?.fields\n        ) {\n          const childFields = buildAutoFormFieldList(metadataField.configuration.relatedModel.fields, {\n            include: childIdentifiers,\n          });\n          subset.push(\n            ...childFields.map(\n              ([childApiIdentifier, childField]) => [`${rootApiIdentifier}.${childApiIdentifier}`, childField] as [string, FieldMetadata]\n            )\n          );\n        }\n      }\n    }\n  }\n\n  if (options?.exclude) {\n    const excludes = new Set(options.exclude);\n    subset = subset.filter(([_, field]) => !excludes.has(field.apiIdentifier));\n  }\n\n  // Remove `hasMany` fields that emerge from `hasManyThrough` fields that are not actually model fields\n  subset = subset.filter(([_, field]) => !isJoinModelHasManyField(field));\n\n  // Filter out fields that are not supported by the form\n  const validFieldTypeSubset = subset.filter(([_, field]) =>\n    options?.isUpsertAction ? isAcceptedUpsertFieldType(field) : isAcceptedFieldType(field)\n  );\n\n  return options?.include\n    ? validFieldTypeSubset // Everything explicitly included is valid\n    : validFieldTypeSubset.filter(([_, field]) => isNotRelatedToSpecialModelFilter(field)); // Without explicit includes, filter out relationships to special models\n};\n\n/**\n * Filters out relationship fields that are related to special models\n */\nconst isNotRelatedToSpecialModelFilter = (field: FieldMetadata) => {\n  const relatedModelKey =\n    field.configuration &&\n    \"relatedModel\" in field.configuration &&\n    field.configuration.relatedModel &&\n    field.configuration.relatedModel.key;\n  return typeof relatedModelKey === \"string\" ? !specialModelKeys.has(relatedModelKey) : true;\n};\n\nconst specialModelKeys = new Set([\"DataModel-Shopify-Shop\"]);\n\nconst isAcceptedFieldType = (field: FieldMetadata) => acceptedAutoFormFieldTypes.has(field.fieldType);\nconst isAcceptedUpsertFieldType = (field: FieldMetadata) => field.fieldType === FieldType.Id || isAcceptedFieldType(field);\n\nconst isJoinModelHasManyField = (field: FieldMetadata) =>\n  field.fieldType === FieldType.HasMany &&\n  field.configuration.__typename === \"GadgetHasManyConfig\" &&\n  field.configuration.isJoinModelHasManyField;\n\nconst acceptedAutoFormFieldTypes = new Set([\n  FieldType.Boolean,\n  FieldType.Color,\n  FieldType.Computed, // Not rendered as an input\n  FieldType.DateTime,\n  FieldType.Email,\n  FieldType.EncryptedString,\n  FieldType.Enum,\n  FieldType.File,\n  FieldType.Json,\n  FieldType.Number,\n  FieldType.Password,\n  FieldType.RichText,\n  FieldType.RoleAssignments,\n  FieldType.String,\n  FieldType.Url,\n  FieldType.Vector, // Not rendered as an input\n  FieldType.RichText,\n\n  // Relationships\n  FieldType.BelongsTo,\n  FieldType.HasMany,\n  FieldType.HasOne,\n]);\n\nexport const filterAutoTableFieldList = (fields: FieldMetadata[]) => {\n  let subset = fields;\n\n  // Don't include relationships in the table by default\n  subset = subset.filter(\n    (field) =>\n      field.fieldType !== GadgetFieldType.HasOne &&\n      field.fieldType !== GadgetFieldType.HasMany &&\n      field.fieldType !== GadgetFieldType.BelongsTo\n  );\n\n  // Filter out fields that are not supported by the form\n  return subset.filter((field) => acceptedAutoTableFieldTypes.has(field.fieldType));\n};\n\nexport const acceptedAutoTableFieldTypes = new Set([\n  FieldType.Id,\n  FieldType.Boolean,\n  FieldType.Color,\n  FieldType.Computed,\n  FieldType.DateTime,\n  FieldType.Email,\n  FieldType.EncryptedString,\n  FieldType.Enum,\n  FieldType.File,\n  FieldType.Json,\n  FieldType.Number,\n  FieldType.RichText,\n  FieldType.RoleAssignments,\n  FieldType.String,\n  FieldType.Url,\n  FieldType.RichText,\n\n  // Relationships\n  FieldType.BelongsTo,\n  FieldType.HasMany,\n  FieldType.HasManyThrough,\n  FieldType.HasOne,\n]);\n\n/**\n * Retrieve the roles available in the Gadget app from the backend\n * @internal\n */\nexport const useRolesMetadata = () => {\n  const [{ data, fetching, error }] = useGadgetQuery({\n    query: RolesMetadataQuery,\n  });\n\n  return {\n    roles: data?.gadgetMeta.roles,\n    fetching,\n    error: error ? ErrorWrapper.forClientSideError(error) : undefined,\n  };\n};\n\nexport const isActionMetadata = (metadata: ActionMetadata | GlobalActionMetadata): metadata is ActionMetadata => {\n  return \"action\" in metadata;\n};\n"]}