{"version":3,"file":"PolarisAutoBelongsToInput.js","sourceRoot":"","sources":["../../../../../../src/auto/polaris/inputs/relationships/PolarisAutoBelongsToInput.tsx"],"names":[],"mappings":";;;;AAAA,8CAAiD;AACjD,0DAA0B;AAC1B,wDAAkD;AAClD,kGAA4F;AAC5F,wFAAoF;AAEpF,qEAA+D;AAElD,QAAA,yBAAyB,GAAG,IAAA,wBAAS,EAAC,CAAC,KAAiC,EAAE,EAAE;IACvF,MAAM,EACJ,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjC,mBAAmB,EAAE,EAAE,OAAO,EAAE,mBAAmB,EAAE,UAAU,EAAE,MAAM,EAAE,EAEzE,SAAS,EACT,YAAY,EAEZ,gBAAgB,EAChB,iCAAiC,EAEjC,cAAc,EACd,cAAc,GACf,GAAG,IAAA,4DAA2B,EAAC,KAAK,CAAC,CAAC;IAEvC,MAAM,mBAAmB,GAAG,gBAAgB;QAC1C,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,KAAK,gBAAgB,CAAC,EAAE,KAAK,IAAI,OAAO,gBAAgB,EAAE;QAC9F,CAAC,CAAC,IAAI,CAAC;IAET,MAAM,iBAAiB,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAC3C,8BAAC,aAAG,IAAC,QAAQ,EAAE,cAAc,EAAE,GAAG,EAAE,qBAAqB,gBAAgB,EAAE;QACzE,qCAAG,KAAK,EAAE,EAAE,KAAK,EAAE,iCAAiC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE,GAAG,gBAAgB,IAAI,mBAAmB,EAAE,IACzH,mBAAmB,CAClB,CACA,CACP,CAAC,CAAC,CAAC,IAAI,CAAC;IAET,MAAM,QAAQ,GAAG,CAAC,QAAgB,EAAE,EAAE;QACpC,MAAM,mBAAmB,GAAG,gBAAgB,KAAK,QAAQ,CAAC;QAE1D,mBAAmB;YACjB,CAAC,CAAC,cAAc,EAAE,CAAC,kBAAkB;YACrC,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,wBAAwB;IACxD,CAAC,CAAC;IAEF,OAAO,CACL;QACE,8BAAC,kBAAQ,IACP,SAAS,EACP,8BAAC,kBAAQ,CAAC,SAAS,IACjB,iBAAiB,EAAE,QAAQ,CAAC,wBAAwB,EACpD,QAAQ,EAAE,MAAM,CAAC,GAAG,EACpB,KAAK,EAAE,MAAM,CAAC,KAAK,EACnB,IAAI,EAAE,IAAI,EACV,KAAK,EAAE,KAAK,CAAC,KAAK,IAAI,QAAQ,CAAC,IAAI,EACnC,WAAW,EAAC,QAAQ,EACpB,YAAY,EAAC,KAAK,EAClB,eAAe,EAAE,iBAAiB,GAClC,EAEJ,kBAAkB,EAAE,UAAU,CAAC,YAAY,EAC3C,mBAAmB,EAAE,UAAU,CAAC,WAAW,IAAI,OAAO,CAAC,MAAM,IAAI,oDAAwB;YAEzF,8BAAC,4CAAmB,IAClB,SAAS,EAAE,SAAS,EACpB,YAAY,EAAE,YAAY,EAC1B,aAAa,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,gBAAgB,EAC9C,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAE,mBAAmB,GAC5B,CACO,CACV,CACJ,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["import { Combobox, Tag } from \"@shopify/polaris\";\nimport React from \"react\";\nimport { autoInput } from \"../../../AutoInput.js\";\nimport { useBelongsToInputController } from \"../../../hooks/useBelongsToInputController.js\";\nimport { optionRecordsToLoadCount } from \"../../../hooks/useRelatedModelOptions.js\";\nimport type { AutoRelationshipInputProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\nimport { RelatedModelOptions } from \"./RelatedModelOptions.js\";\n\nexport const PolarisAutoBelongsToInput = autoInput((props: AutoRelationshipInputProps) => {\n  const {\n    fieldMetadata: { path, metadata },\n    relatedModelOptions: { options, searchFilterOptions, pagination, search },\n\n    isLoading,\n    errorMessage,\n\n    selectedRecordId,\n    selectedRelatedModelRecordMissing,\n\n    onSelectRecord,\n    onRemoveRecord,\n  } = useBelongsToInputController(props);\n\n  const selectedRecordLabel = selectedRecordId\n    ? options.find((option) => option.id === selectedRecordId)?.label ?? `id: ${selectedRecordId}`\n    : null;\n\n  const selectedRecordTag = selectedRecordId ? (\n    <Tag onRemove={onRemoveRecord} key={`selectedRecordTag_${selectedRecordId}`}>\n      <p style={{ color: selectedRelatedModelRecordMissing ? \"red\" : undefined }} id={`${selectedRecordId}_${selectedRecordLabel}`}>\n        {selectedRecordLabel}\n      </p>\n    </Tag>\n  ) : null;\n\n  const onSelect = (recordId: string) => {\n    const idIsAlreadySelected = selectedRecordId === recordId;\n\n    idIsAlreadySelected\n      ? onRemoveRecord() // clear selection\n      : onSelectRecord(recordId); // make single selection\n  };\n\n  return (\n    <>\n      <Combobox\n        activator={\n          <Combobox.TextField\n            requiredIndicator={metadata.requiredArgumentForInput}\n            onChange={search.set}\n            value={search.value}\n            name={path}\n            label={props.label ?? metadata.name}\n            placeholder=\"Search\"\n            autoComplete=\"off\"\n            verticalContent={selectedRecordTag}\n          />\n        }\n        onScrolledToBottom={pagination.loadNextPage}\n        willLoadMoreOptions={pagination.hasNextPage && options.length >= optionRecordsToLoadCount}\n      >\n        <RelatedModelOptions\n          isLoading={isLoading}\n          errorMessage={errorMessage}\n          checkSelected={(id) => id === selectedRecordId}\n          onSelect={onSelect}\n          options={searchFilterOptions}\n        />\n      </Combobox>\n    </>\n  );\n});\n"]}