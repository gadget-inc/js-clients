{"version":3,"file":"PolarisWCAutoTableTagCell.js","sourceRoot":"","sources":["../../../../../src/auto/polaris-wc/tableCells/PolarisWCAutoTableTagCell.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport type { Nullable, RoleAssignmentsValueType } from \"../../../utils.js\";\nimport { useTagsForTableCellRenderer } from \"../../hooks/useTagsForTableCellRenderer.js\";\nimport { PolarisWCPopover } from \"../commonComponents/PolarisWCPopover.js\";\n\nexport const PolarisWCAutoTableTagCell = (props: { value: Nullable<string> | Nullable<string>[] | RoleAssignmentsValueType[] }) => {\n  const { value } = props;\n  const [showMore, setShowMore] = useState(false);\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const ref = useRef<HTMLDivElement>(null);\n  const { allTags, shortenedTags, hasOmittedTags } = useTagsForTableCellRenderer({\n    value,\n    maxTagCount: 3,\n    maxTagLength: 6,\n  });\n\n  const omittedTags = allTags.slice(shortenedTags.length);\n\n  useEffect(() => {\n    if (ref.current) {\n      setShowMore(ref.current.scrollWidth > ref.current.clientWidth);\n    }\n  }, [shortenedTags]);\n\n  const cellContent = useMemo(\n    () => (\n      <div\n        style={{\n          display: \"flex\",\n          flexWrap: \"nowrap\",\n          alignItems: \"center\",\n          overflow: \"hidden\",\n          minWidth: 0,\n        }}\n      >\n        <div\n          style={{\n            overflowX: \"hidden\",\n            display: \"flex\",\n            flexWrap: \"nowrap\",\n            gap: \"2px\",\n            alignItems: \"center\",\n          }}\n          ref={ref}\n        >\n          {shortenedTags.map((tag) => (\n            <s-chip key={tag}>{tag}</s-chip>\n          ))}\n          {hasOmittedTags ? <span style={{ flexShrink: 0 }}>...</span> : null}\n        </div>\n        {showMore && hasOmittedTags ? <span style={{ flexShrink: 0 }}>...</span> : null}\n      </div>\n    ),\n    [shortenedTags, hasOmittedTags, showMore]\n  );\n\n  return (\n    <div\n      onMouseEnter={() => hasOmittedTags && setPopoverOpen(true)}\n      onMouseLeave={() => setPopoverOpen(false)}\n      style={{ cursor: hasOmittedTags ? \"default\" : undefined }}\n    >\n      {hasOmittedTags ? (\n        <PolarisWCPopover\n          open={popoverOpen}\n          onClose={() => setPopoverOpen(false)}\n          anchor={cellContent}\n          maxHeight=\"200px\"\n          contentProps={{\n            onMouseEnter: () => hasOmittedTags && setPopoverOpen(true),\n            onMouseLeave: () => setPopoverOpen(false),\n          }}\n        >\n          <div style={{ maxWidth: \"220px\", padding: \"8px 12px\" }}>\n            <s-stack direction=\"inline\" gap=\"small-100\">\n              {omittedTags.map((tag) => (\n                <s-chip key={tag}>{tag}</s-chip>\n              ))}\n            </s-stack>\n          </div>\n        </PolarisWCPopover>\n      ) : (\n        cellContent\n      )}\n    </div>\n  );\n};\n"]}