{"version":3,"file":"PolarisWCAutoJSONInput.js","sourceRoot":"","sources":["../../../../../src/auto/polaris-wc/inputs/PolarisWCAutoJSONInput.tsx"],"names":[],"mappings":";;;;AAAA,+DAA+D;AAC/D,uDAA2C;AAC3C,sDAAgD;AAChD,qDAA+C;AAC/C,qFAA+E;AAQ/E;;;;;;;;;;;GAWG;AACU,QAAA,sBAAsB,GAAG,IAAA,wBAAS,EAAC,CAAC,KAAkC,EAAE,EAAE;IACrF,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,SAAS,EAAE,GAAG,KAAK,CAAC;IACtD,MAAM,CAAC,SAAS,EAAE,UAAU,CAAC,GAAG,IAAA,sBAAQ,GAAE,CAAC;IAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,eAAe,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,kDAAsB,EAAC,SAAS,CAAC,CAAC;IAE/H,MAAM,YAAY,GAAG,IAAA,mBAAW,EAC9B,CAAC,KAAY,EAAE,EAAE;QACf,MAAM,MAAM,GAAG,KAAK,CAAC,aAAoB,CAAC;QAC1C,QAAQ,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC;IAC/B,CAAC,EACD,CAAC,QAAQ,CAAC,CACX,CAAC;IAEF,kCAAkC;IAClC,MAAM,KAAK,GAAW,OAAO,KAAK,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC;IACpG,MAAM,YAAY,GAAG,CAAC,SAAS,IAAI,YAAY,CAAC,CAAC,CAAC,iBAAiB,YAAY,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;IAE9F,MAAM,WAAW,GAAG,IAAA,mBAAW,EAC7B,CAAC,KAAY,EAAE,EAAE;QACf,UAAU,CAAC,OAAO,EAAE,CAAC,KAAY,CAAC,CAAC;IACrC,CAAC,EACD,CAAC,UAAU,CAAC,OAAO,CAAC,CACrB,CAAC;IAEF,MAAM,UAAU,GAAG,IAAA,mBAAW,EAC5B,CAAC,KAAY,EAAE,EAAE;QACf,UAAU,CAAC,MAAM,EAAE,CAAC,KAAY,CAAC,CAAC;IACpC,CAAC,EACD,CAAC,UAAU,CAAC,MAAM,CAAC,CACpB,CAAC;IAEF,OAAO,CACL,+CACE,EAAE,EAAE,EAAE,EACN,KAAK,EAAE,KAAK,EACZ,KAAK,EAAE,KAAK,IAAI,EAAE,EAClB,IAAI,EAAE,CAAC,EACP,WAAW,EAAE,WAAW,EACxB,QAAQ,EAAE,QAAQ,EAClB,QAAQ,EAAE,QAAQ,CAAC,wBAAwB,EAC3C,KAAK,EAAE,YAAY,EACnB,QAAQ,EAAE,YAAY,EACtB,OAAO,EAAE,WAAW,EACpB,MAAM,EAAE,UAAU,GAClB,CACH,CAAC;AACJ,CAAC,CAAC,CAAC","sourcesContent":["// import type * as PolarisTypes from \"@shopify/polaris-types\";\nimport React, { useCallback } from \"react\";\nimport { useFocus } from \"../../../useFocus.js\";\nimport { autoInput } from \"../../AutoInput.js\";\nimport { useJSONInputController } from \"../../hooks/useJSONInputController.js\";\nimport { type AutoJSONInputProps } from \"../../shared/AutoInputTypes.js\";\n\nexport type PolarisWCAutoJSONInputProps = AutoJSONInputProps & {\n  placeholder?: string;\n  disabled?: boolean;\n};\n\n/**\n * A JSON editor within AutoForm using Polaris Web Components.\n * @example\n * ```tsx\n * <AutoForm action={api.modelA.create}>\n *   <AutoJSONInput field=\"fieldA\" label=\"Field A\" />\n * </AutoForm>\n * ```\n * @param props.field - The JSON field API identifier.\n * @param props.label - Label of the JSON editor.\n * @returns The AutoJSONInput component\n */\nexport const PolarisWCAutoJSONInput = autoInput((props: PolarisWCAutoJSONInputProps) => {\n  const { placeholder, disabled, ...restProps } = props;\n  const [isFocused, focusProps] = useFocus();\n  const { type: _type, id, errorMessage, label: controllerLabel, metadata, value, onChange } = useJSONInputController(restProps);\n\n  const handleChange = useCallback(\n    (event: Event) => {\n      const target = event.currentTarget as any;\n      onChange(target.value ?? \"\");\n    },\n    [onChange]\n  );\n\n  // Ensure label is always a string\n  const label: string = typeof props.label === \"string\" ? props.label : String(controllerLabel ?? \"\");\n  const displayError = !isFocused && errorMessage ? `Invalid JSON: ${errorMessage}` : undefined;\n\n  const handleFocus = useCallback(\n    (event: Event) => {\n      focusProps.onFocus?.(event as any);\n    },\n    [focusProps.onFocus]\n  );\n\n  const handleBlur = useCallback(\n    (event: Event) => {\n      focusProps.onBlur?.(event as any);\n    },\n    [focusProps.onBlur]\n  );\n\n  return (\n    <s-text-area\n      id={id}\n      label={label}\n      value={value ?? \"\"}\n      rows={4}\n      placeholder={placeholder}\n      disabled={disabled}\n      required={metadata.requiredArgumentForInput}\n      error={displayError}\n      onChange={handleChange}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n    />\n  );\n});\n"]}