{"version":3,"file":"PolarisWCSearchableSingleRelatedModelRecordSelector.js","sourceRoot":"","sources":["../../../../../../src/auto/polaris-wc/inputs/relationships/PolarisWCSearchableSingleRelatedModelRecordSelector.tsx"],"names":[],"mappings":";;;;AAAA,0DAA0B;AAE1B,uFAA4H;AAErH,MAAM,mDAAmD,GAAG,CAAC,KAKnE,EAAE,EAAE;IACH,MAAM,EACJ,MAAM,EACN,UAAU,EACV,aAAa,EACb,UAAU,EACV,OAAO,EACP,SAAS,EACT,mBAAmB,EACnB,gBAAgB,EAChB,IAAI,EACJ,QAAQ,EACR,YAAY,GACb,GAAG,KAAK,CAAC,IAAI,CAAC;IAEf,OAAO,CACL;QACE,8BAAC,qEAAmC,IAClC,MAAM,EAAE,UAAU,EAClB,SAAS,EACP,8BAAC,oEAAkC,IACjC,SAAS,EAAE,gBAAgB,EAC3B,KAAK,EAAE,MAAM,CAAC,KAAK,EACnB,QAAQ,EAAE,MAAM,CAAC,GAAG,EACpB,OAAO,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,GAClC,EAEJ,OAAO,EAAE,GAAG,EAAE,CAAC,aAAa,CAAC,KAAK,CAAC,EACnC,kBAAkB,EAAE,UAAU,CAAC,YAAY,EAC3C,OAAO,EAAE;gBACP,0CACE,GAAG,EAAC,gBAAgB,EACpB,IAAI,EAAC,QAAQ,EACb,OAAO,EAAE,GAAG,EAAE;wBACZ,KAAK,CAAC,QAAQ,EAAE,YAAY,EAAE,EAAE,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;wBACvD,aAAa,CAAC,KAAK,CAAC,CAAC;oBACvB,CAAC,EACD,KAAK,EAAE;wBACL,OAAO,EAAE,MAAM;wBACf,KAAK,EAAE,MAAM;wBACb,OAAO,EAAE,UAAU;wBACnB,MAAM,EAAE,MAAM;wBACd,YAAY,EAAE,0CAA0C;wBACxD,UAAU,EAAE,aAAa;wBACzB,MAAM,EAAE,SAAS;wBACjB,SAAS,EAAE,MAAM;wBACjB,UAAU,EAAE,QAAQ;wBACpB,GAAG,EAAE,KAAK;qBACX,EACD,YAAY,EAAE,CAAC,CAAC,EAAE,EAAE;wBAClB,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG,0CAA0C,CAAC;oBAChF,CAAC,EACD,YAAY,EAAE,CAAC,CAAC,EAAE,EAAE;wBAClB,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,UAAU,GAAG,aAAa,CAAC;oBACnD,CAAC;oBAED,0CAAQ,IAAI,EAAC,MAAM,GAAG;oBACtB;;wBAAa,gBAAgB,CAAU,CAChC;aACV,EACD,OAAO,EAAE,mBAAmB,EAC5B,OAAO,EAAE,OAAO,EAChB,QAAQ,EAAE,CAAC,MAAM,EAAE,EAAE;gBACnB,IAAI,MAAM,CAAC,EAAG,IAAI,gBAAgB,EAAE,CAAC;oBACnC,QAAQ,CAAC,IAAI,EAAE,EAAE,GAAG,MAAM,EAAE,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;gBAClD,CAAC;gBACD,aAAa,CAAC,KAAK,CAAC,CAAC;YACvB,CAAC,EACD,SAAS,EAAE,SAAS,GACpB,CACD,CACJ,CAAC;AACJ,CAAC,CAAC;AA7EW,QAAA,mDAAmD,uDA6E9D","sourcesContent":["import React from \"react\";\nimport { type useSingleRelatedRecordRelationshipForm } from \"../../../../useSingleRelatedRecordRelationshipForm.js\";\nimport { PolarisWCRelatedModelOptionsPopover, PolarisWCRelatedModelOptionsSearch } from \"./PolarisWCRelatedModelOptions.js\";\n\nexport const PolarisWCSearchableSingleRelatedModelRecordSelector = (props: {\n  form: ReturnType<typeof useSingleRelatedRecordRelationshipForm>;\n  override?: {\n    addNewRecord?: () => void;\n  };\n}) => {\n  const {\n    search,\n    searchOpen,\n    setSearchOpen,\n    pagination,\n    records,\n    isLoading,\n    searchFilterOptions,\n    relatedModelName,\n    path,\n    setValue,\n    setIsEditing,\n  } = props.form;\n\n  return (\n    <>\n      <PolarisWCRelatedModelOptionsPopover\n        active={searchOpen}\n        activator={\n          <PolarisWCRelatedModelOptionsSearch\n            modelName={relatedModelName}\n            value={search.value}\n            onChange={search.set}\n            onFocus={() => setSearchOpen(true)}\n          />\n        }\n        onClose={() => setSearchOpen(false)}\n        onScrolledToBottom={pagination.loadNextPage}\n        actions={[\n          <button\n            key=\"add-new-record\"\n            type=\"button\"\n            onClick={() => {\n              props.override?.addNewRecord?.() ?? setIsEditing(true);\n              setSearchOpen(false);\n            }}\n            style={{\n              display: \"flex\",\n              width: \"100%\",\n              padding: \"8px 12px\",\n              border: \"none\",\n              borderBottom: \"1px solid var(--p-color-border, #dfe3e8)\",\n              background: \"transparent\",\n              cursor: \"pointer\",\n              textAlign: \"left\",\n              alignItems: \"center\",\n              gap: \"8px\",\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = \"var(--p-color-bg-surface-hover, #f9fafb)\";\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = \"transparent\";\n            }}\n          >\n            <s-icon type=\"plus\" />\n            <s-text>Add {relatedModelName}</s-text>\n          </button>,\n        ]}\n        options={searchFilterOptions}\n        records={records}\n        onSelect={(record) => {\n          if (record.id! == \"add-new-record\") {\n            setValue(path, { ...record, _link: record.id });\n          }\n          setSearchOpen(false);\n        }}\n        isLoading={isLoading}\n      />\n    </>\n  );\n};\n"]}