{"version":3,"file":"PolarisWCAutoEnumInput.js","sourceRoot":"","sources":["../../../../../src/auto/polaris-wc/inputs/PolarisWCAutoEnumInput.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo } from \"react\";\nimport { autoInput } from \"../../AutoInput.js\";\nimport { useEnumInputController } from \"../../hooks/useEnumInputController.js\";\nimport { type AutoEnumInputProps } from \"../../shared/AutoInputTypes.js\";\nimport { PolarisWCDismissibleBadge } from \"../commonComponents/PolarisWCDismissibleBadge.js\";\nimport { PolarisWCTruncatedTextWithTooltip } from \"../commonComponents/PolarisWCTruncatedTextWithTooltip.js\";\nimport { PolarisWCCombobox, PolarisWCComboboxOption } from \"./PolarisWCCombobox.js\";\n\nexport type PolarisWCAutoEnumInputProps = AutoEnumInputProps & {\n  placeholder?: string;\n  disabled?: boolean;\n};\n\n/**\n * An enum option picker within AutoForm using Polaris Web Components.\n * Uses a searchable combobox for single or multiple selection.\n * @example\n * ```tsx\n * <AutoForm action={api.modelA.create}>\n *   <AutoEnumInput field=\"enumField\" />\n * </AutoForm>\n * ```\n * @param props.field - The API identifier of the Enum field.\n * @param props.label - Label of the Enum input.\n * @returns The AutoEnumInput component.\n */\nexport const PolarisWCAutoEnumInput = autoInput((props: PolarisWCAutoEnumInputProps) => {\n  const { label: labelProp, placeholder, disabled } = props;\n  const { allowMultiple, allowOther, onSelectionChange, selectedOptions, filteredOptions, searchQuery, label, metadata, errorMessage } =\n    useEnumInputController(props);\n\n  // Ensure label is always a string\n  const inputLabel: string = typeof labelProp === \"string\" ? labelProp : String(label ?? \"\");\n\n  // Single select: show selected value in input when not searching; otherwise show search text\n  const singleSelectInputValue = searchQuery.value !== \"\" ? searchQuery.value : selectedOptions[0] ?? \"\";\n\n  const handleSingleInputChange = useCallback(\n    (value: string) => {\n      searchQuery.setValue(value);\n      if (value === \"\" && selectedOptions[0]) {\n        onSelectionChange(null);\n      }\n    },\n    [searchQuery, selectedOptions, onSelectionChange]\n  );\n\n  const handleSingleOptionClick = useCallback(\n    (option: string) => {\n      onSelectionChange(option);\n    },\n    [onSelectionChange]\n  );\n\n  const handleMultiOptionClick = useCallback(\n    (option: string) => {\n      onSelectionChange(option);\n    },\n    [onSelectionChange]\n  );\n\n  const verticalContent = useMemo(() => {\n    if (!allowMultiple || selectedOptions.length === 0) return undefined;\n    return (\n      <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"4px\", marginTop: \"6px\" }}>\n        {selectedOptions.map((value) => (\n          <div style={{ maxWidth: \"128px\" }} key={value}>\n            <PolarisWCDismissibleBadge key={value} onDismiss={() => onSelectionChange(value)}>\n              <PolarisWCTruncatedTextWithTooltip text={value} />\n            </PolarisWCDismissibleBadge>\n          </div>\n        ))}\n      </div>\n    );\n  }, [allowMultiple, selectedOptions, onSelectionChange]);\n\n  return (\n    <PolarisWCCombobox\n      id={`${metadata.apiIdentifier}-combobox-textfield`}\n      label={inputLabel}\n      placeholder={placeholder ?? \"Search...\"}\n      value={allowMultiple ? searchQuery.value : singleSelectInputValue}\n      onChange={allowMultiple ? searchQuery.setValue : handleSingleInputChange}\n      allowMultiple={allowMultiple}\n      required={metadata.requiredArgumentForInput}\n      disabled={disabled}\n      error={errorMessage}\n      verticalContent={verticalContent}\n    >\n      {allowOther && searchQuery.value.trim() !== \"\" && !filteredOptions.includes(searchQuery.value.trim()) && (\n        <PolarisWCComboboxOption\n          key={`add-${searchQuery.value}`}\n          text={`Add \"${searchQuery.value.trim()}\"`}\n          selected={false}\n          multiselect={false}\n          onClick={() =>\n            allowMultiple ? handleMultiOptionClick(searchQuery.value.trim()) : handleSingleOptionClick(searchQuery.value.trim())\n          }\n        />\n      )}\n      {filteredOptions.map((option) => (\n        <PolarisWCComboboxOption\n          key={option}\n          text={option}\n          selected={allowMultiple ? selectedOptions.includes(option) : selectedOptions[0] === option}\n          multiselect={allowMultiple}\n          onClick={() => (allowMultiple ? handleMultiOptionClick(option) : handleSingleOptionClick(option))}\n        />\n      ))}\n      {filteredOptions.length === 0 && !(allowOther && searchQuery.value.trim() !== \"\") && <s-text>No results found</s-text>}\n    </PolarisWCCombobox>\n  );\n});\n"]}