{"version":3,"file":"useStringInputController.js","sourceRoot":"","sources":["../../../../src/auto/hooks/useStringInputController.tsx"],"names":[],"mappings":";;;AACA,mDAA8C;AAE9C,6DAAuD;AACvD,+DAAyD;AAE5C,QAAA,oBAAoB,GAA6C;IAC5E,CAAC,uBAAS,CAAC,MAAM,CAAC,EAAE,QAAQ;IAC5B,CAAC,uBAAS,CAAC,KAAK,CAAC,EAAE,OAAO;IAC1B,CAAC,uBAAS,CAAC,QAAQ,CAAC,EAAE,UAAU;IAChC,CAAC,uBAAS,CAAC,eAAe,CAAC,EAAE,UAAU;CAC/B,CAAC;AAEX,MAAM,iBAAiB,GAA6C;IAClE,CAAC,uBAAS,CAAC,MAAM,CAAC,EAAE,YAAY;IAChC,CAAC,uBAAS,CAAC,MAAM,CAAC,EAAE,cAAc;IAClC,CAAC,uBAAS,CAAC,KAAK,CAAC,EAAE,mBAAmB;IACtC,CAAC,uBAAS,CAAC,QAAQ,CAAC,EAAE,OAAO;IAC7B,CAAC,uBAAS,CAAC,eAAe,CAAC,EAAE,YAAY;IACzC,CAAC,uBAAS,CAAC,KAAK,CAAC,EAAE,aAAa;IAChC,CAAC,uBAAS,CAAC,GAAG,CAAC,EAAE,aAAa;CACtB,CAAC;AAEJ,MAAM,wBAAwB,GAAG,CACtC,KAEoC,EACpC,EAAE;IACF,MAAM,EAAE,KAAK,EAAE,kBAAkB,EAAE,GAAG,IAAI,EAAE,GAAG,KAAK,CAAC;IACrD,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,IAAA,sCAAgB,EAAC,kBAAkB,CAAC,CAAC;IAEhE,MAAM,EACJ,KAAK,EAAE,eAAe,EACtB,UAAU,EAAE,EAAE,KAAK,EAAE,GACtB,GAAG,IAAA,gCAAa,EAAC;QAChB,IAAI,EAAE,IAAI;QACV,GAAG,IAAI;KACR,CAAC,CAAC;IAEH,MAAM,EAAE,KAAK,EAAE,GAAG,qBAAqB,EAAE,GAAG,eAAe,CAAC;IAE5D,MAAM,WAAW,GAAG,iBAAiB,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IAE1D,OAAO;QACL,EAAE,EAAE,IAAI;QACR,KAAK,EAAE,QAAQ,CAAC,IAAI;QACpB,IAAI,EAAE,4BAAoB,CAAC,QAAQ,CAAC,SAAS,CAAC;QAC9C,OAAO,EAAE,CAAC,CAAC,KAAK;QAChB,YAAY,EAAE,KAAK,EAAE,OAAO;QAC5B,YAAY,EAAE,KAAK;QACnB,WAAW;QACX,QAAQ;QACR,KAAK,EAAE,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,SAAS,CAAC;QAC1C,GAAG,qBAAqB;KACzB,CAAC;AACJ,CAAC,CAAC;AAhCW,QAAA,wBAAwB,4BAgCnC;AAEF,MAAM,QAAQ,GAAG,CAAC,KAAU,EAAE,SAA0B,EAAE,EAAE;IAC1D,2GAA2G;IAC3G,OAAO,SAAS,KAAK,uBAAS,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC;AAC5D,CAAC,CAAC","sourcesContent":["import type { GadgetFieldType } from \"../../internal/gql/graphql.js\";\nimport { FieldType } from \"../../metadata.js\";\nimport type { UseControllerProps } from \"../../useActionForm.js\";\nimport { useController } from \"../../useActionForm.js\";\nimport { useFieldMetadata } from \"./useFieldMetadata.js\";\n\nexport const FieldTypeToInputType: Partial<Record<GadgetFieldType, string>> = {\n  [FieldType.Number]: \"number\",\n  [FieldType.Email]: \"email\",\n  [FieldType.Password]: \"password\",\n  [FieldType.EncryptedString]: \"password\",\n} as const;\n\nconst PlaceholderValues: Partial<Record<GadgetFieldType, string>> = {\n  [FieldType.String]: \"Enter text\",\n  [FieldType.Number]: \"Enter number\",\n  [FieldType.Email]: \"example@email.com\",\n  [FieldType.Password]: \"Value\",\n  [FieldType.EncryptedString]: \"Enter text\",\n  [FieldType.Color]: \"Enter color\",\n  [FieldType.Url]: \"example.com\",\n} as const;\n\nexport const useStringInputController = (\n  props: {\n    field: string; // The field API identifier\n  } & Omit<UseControllerProps, \"name\">\n) => {\n  const { field: fieldApiIdentifier, ...rest } = props;\n  const { path, metadata } = useFieldMetadata(fieldApiIdentifier);\n\n  const {\n    field: fieldProperties,\n    fieldState: { error },\n  } = useController({\n    name: path,\n    ...rest,\n  });\n\n  const { value, ...restOfFieldProperties } = fieldProperties;\n\n  const placeholder = PlaceholderValues[metadata.fieldType];\n\n  return {\n    id: path,\n    label: metadata.name,\n    type: FieldTypeToInputType[metadata.fieldType],\n    isError: !!error,\n    errorMessage: error?.message,\n    autoComplete: \"off\",\n    placeholder,\n    metadata,\n    value: getValue(value, metadata.fieldType),\n    ...restOfFieldProperties,\n  };\n};\n\nconst getValue = (value: any, fieldType: GadgetFieldType) => {\n  // JSON fields can have null value which is different from an empty string. In that case, use null directly\n  return fieldType === FieldType.Json ? value : value ?? \"\";\n};\n"]}