{"version":3,"file":"useFieldMetadata.js","sourceRoot":"","sources":["../../../../src/auto/hooks/useFieldMetadata.tsx"],"names":[],"mappings":";;;AACA,8DAA4D;AAC5D,4EAAyE;AAElE,MAAM,qBAAqB,GAAG,CAAC,kBAA0B,EAAE,EAAE;IAClE,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,wCAAmB,GAAE,CAAC;IAEzC,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,WAAW,CAAC,kBAAkB,CAAC,CAAC;IAE/D,MAAM,mBAAmB,GAAG,MAAM,CAAC,IAAI,CACrC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,KAAK,YAAY,IAAI,+BAA+B,CAAC,kBAAkB,EAAE,KAAK,CAAC,CACrG,CAAC;IAEF,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,mBAAmB,EAAE,QAAQ,EAAE,CAAC;AAC3D,CAAC,CAAC;AAVW,QAAA,qBAAqB,yBAUhC;AAEK,MAAM,gBAAgB,GAAG,CAAC,kBAA0B,EAAE,EAAE;IAC7D,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,IAAA,6BAAqB,EAAC,kBAAkB,CAAC,CAAC;IAErE,IAAI,CAAC,QAAQ,EAAE,CAAC;QACd,MAAM,IAAI,KAAK,CAAC,UAAU,kBAAkB,yBAAyB,CAAC,CAAC;IACzE,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;AAC5B,CAAC,CAAC;AARW,QAAA,gBAAgB,oBAQ3B;AAEF,MAAM,WAAW,GAAG,CAAC,kBAA0B,EAAE,EAAE;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wCAAmB,GAAE,CAAC;IAExC,MAAM,4BAA4B,GAAG,IAAA,+CAAuC,EAAC,kBAAkB,CAAC,CAAC;IAEjG,IAAI,4BAA4B,IAAI,KAAK,EAAE,CAAC;QAC1C,MAAM,IAAI,GAAG,KAAK,CAAC,aAAa,GAAG,GAAG,GAAG,4BAA4B,CAAC,IAAI,CAAC;QAC3E,MAAM,YAAY,GAAG,KAAK,CAAC,aAAa,GAAG,GAAG,GAAG,4BAA4B,CAAC,YAAY,CAAC;QAE3F,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;IAChC,CAAC;IAED,mBAAmB;IACnB,MAAM,aAAa,GAAG,KAAK,IAAI,KAAK,CAAC,aAAa,CAAC;IACnD,MAAM,IAAI,GAAG,aAAa;QACxB,CAAC,CAAC,KAAK,CAAC,aAAa,GAAG,GAAG,GAAG,kBAAkB,CAAC,eAAe;QAChE,CAAC,CAAC,kBAAkB,CAAC,CAAC,gBAAgB;IAExC,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;AACtC,CAAC,CAAC;AAEK,MAAM,uCAAuC,GAAG,CAAC,kBAA0B,EAAE,EAAE;IACpF,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wCAAmB,GAAE,CAAC;IACxC,MAAM,mBAAmB,GAAG,IAAA,+CAAsB,GAAE,CAAC;IAErD,IAAI,CAAC,mBAAmB,IAAI,CAAC,KAAK,EAAE,CAAC;QACnC,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,IAAI,GAAG,mBAAmB,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC;IACnE,MAAM,YAAY,GAAG,mBAAmB,EAAE,qBAAqB,CAAC,CAAC,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAEvI,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;AAChC,CAAC,CAAC;AAZW,QAAA,uCAAuC,2CAYlD;AAEF,MAAM,+BAA+B,GAAG,CACtC,kBAA0B,EAC1B,cAGC,EACD,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,UAAU,KAAK,kBAAkB,IAAI,cAAc,CAAC,IAAI,KAAK,kBAAkB,CAAC","sourcesContent":["import { type FieldMetadata } from \"../../metadata.js\";\nimport { useAutoFormMetadata } from \"../AutoFormContext.js\";\nimport { useRelationshipContext } from \"../hooks/useAutoRelationship.js\";\n\nexport const useMaybeFieldMetadata = (fieldApiIdentifier: string) => {\n  const { fields } = useAutoFormMetadata();\n\n  const { path, metaDataPath } = useGetPaths(fieldApiIdentifier);\n\n  const targetFieldMetadata = fields.find(\n    (field) => field.path === metaDataPath || isFieldCustomParamOnModelAction(fieldApiIdentifier, field)\n  );\n\n  return { path, metadata: targetFieldMetadata?.metadata };\n};\n\nexport const useFieldMetadata = (fieldApiIdentifier: string) => {\n  const { path, metadata } = useMaybeFieldMetadata(fieldApiIdentifier);\n\n  if (!metadata) {\n    throw new Error(`Field \"${fieldApiIdentifier}\" not found in metadata`);\n  }\n\n  return { path, metadata };\n};\n\nconst useGetPaths = (fieldApiIdentifier: string) => {\n  const { model } = useAutoFormMetadata();\n\n  const relationshipTransformedPaths = useRelationshipTransformedMetaDataPaths(fieldApiIdentifier);\n\n  if (relationshipTransformedPaths && model) {\n    const path = model.apiIdentifier + \".\" + relationshipTransformedPaths.path;\n    const metaDataPath = model.apiIdentifier + \".\" + relationshipTransformedPaths.metaDataPath;\n\n    return { path, metaDataPath };\n  }\n\n  // Non-relationship\n  const isModelAction = model && model.apiIdentifier;\n  const path = isModelAction\n    ? model.apiIdentifier + \".\" + fieldApiIdentifier // Model action\n    : fieldApiIdentifier; // Global action\n\n  return { path, metaDataPath: path };\n};\n\nexport const useRelationshipTransformedMetaDataPaths = (fieldApiIdentifier: string) => {\n  const { model } = useAutoFormMetadata();\n  const relationshipContext = useRelationshipContext();\n\n  if (!relationshipContext || !model) {\n    return null;\n  }\n\n  const path = relationshipContext.transformPath(fieldApiIdentifier);\n  const metaDataPath = relationshipContext?.transformMetadataPath ? relationshipContext.transformMetadataPath(fieldApiIdentifier) : path;\n\n  return { path, metaDataPath };\n};\n\nconst isFieldCustomParamOnModelAction = (\n  fieldApiIdentifier: string,\n  fieldCandidate: {\n    path: string;\n    metadata: FieldMetadata;\n  }\n) => fieldCandidate.metadata.__typename !== \"GadgetModelField\" && fieldCandidate.path === fieldApiIdentifier;\n"]}