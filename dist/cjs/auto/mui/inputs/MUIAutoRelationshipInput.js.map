{"version":3,"file":"MUIAutoRelationshipInput.js","sourceRoot":"","sources":["../../../../../src/auto/mui/inputs/MUIAutoRelationshipInput.tsx"],"names":[],"mappings":";;;;AAAA,4CAAyE;AACzE,0DAA0B;AAE1B,qGAA+F;AAExF,MAAM,wBAAwB,GAAG,CAAC,KAIxC,EAAE,EAAE;IACH,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,KAAK,CAAC;IAE9C,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,UAAU,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,kEAA8B,EAAC;QAChH,KAAK,EAAE,KAAK;QACZ,OAAO,EAAE,OAAO;QAChB,WAAW,EAAE,WAAW;KACzB,CAAC,CAAC;IAEH,IAAI,SAAS,EAAE,CAAC;QACd,oDAAoD;QACpD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,OAAO,CACL,8BAAC,uBAAY,IACX,YAAY,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE;YAC9B,MAAM,gBAAgB,GAAG,MAAM,CAAC,QAAQ,KAAK,IAAI,CAAC;YAClD,MAAM,UAAU,GAAG,MAAM,CAAC,QAAQ,KAAK,SAAS,CAAC,EAAE,CAAC;YACpD,OAAO,gBAAgB,IAAI,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,CACpD,8BAAC,cAAG,OACE,KAAK,EACT,SAAS,EAAC,IAAI,EACd,OAAO,EAAE,GAAG,EAAE,CAAC,SAAS,EACxB,WAAW,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,qBAAqB,EAAE;gBAErD,8BAAC,qBAAU,IAAC,KAAK,EAAE,MAAM,IAAG,mBAAmB,CAAC,KAAK,CAAc,CAC/D,CACP,CAAC,CAAC,CAAC,CACF,8BAAC,cAAG,IAAC,SAAS,EAAC,IAAI,KAAK,KAAK;gBAC1B,UAAU,IAAI,KAAK;gBACnB,MAAM,CAAC,KAAK,CACT,CACP,CAAC;QACJ,CAAC,EACD,OAAO,EAAE,CAAC,GAAG,YAAY,CAAC,OAAO,EAAE,mBAAmB,CAAC,EACvD,QAAQ,EAAE,CAAC,CAAC,EAAE,aAAa,EAAE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,EAC3H,OAAO,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAC3B,WAAW,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,CACvB,8BAAC,oBAAS,OAAK,MAAM,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,GAAI,CAC9H,GACa,CACjB,CAAC;AACJ,CAAC,CAAC;AA/CW,QAAA,wBAAwB,4BA+CnC;AAEF,MAAM,mBAAmB,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC","sourcesContent":["import { Autocomplete, Box, TextField, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport { Control } from \"react-hook-form\";\nimport { useRelationshipInputController } from \"../../hooks/useRelationshipInputController.js\";\n\nexport const MUIAutoRelationshipInput = (props: {\n  field: string;\n  control?: Control<any>;\n  optionLabel?: string | ((record: Record<string, any>) => string);\n}) => {\n  const { field, control, optionLabel } = props;\n\n  const { path, isHasMany, relatedModel, metadata, pagination, search, selection } = useRelationshipInputController({\n    field: field,\n    control: control,\n    optionLabel: optionLabel,\n  });\n\n  if (isHasMany) {\n    // TODO - Update to account for HasMany relationship\n    return null;\n  }\n\n  return (\n    <Autocomplete\n      renderOption={(props, option) => {\n        const isShowMoreButton = option.recordId === \"-1\";\n        const isSelected = option.recordId === selection.id;\n        return isShowMoreButton && relatedModel.hasNextPage ? (\n          <Box\n            {...props}\n            component=\"li\"\n            onClick={() => undefined} // Overriding the default onClick makes this un-selectable\n            onMouseOver={() => pagination.loadNextPageOfRecords()}\n          >\n            <Typography color={\"blue\"}>{showMoreHoverOption.label}</Typography>\n          </Box>\n        ) : (\n          <Box component=\"li\" {...props}>\n            {isSelected && `✔️ `}\n            {option.label}\n          </Box>\n        );\n      }}\n      options={[...relatedModel.options, showMoreHoverOption]}\n      onChange={(e, selectedValue) => selection.set(selection.id === selectedValue.recordId ? undefined : selectedValue.recordId)}\n      onClose={() => search.set()}\n      renderInput={(params) => (\n        <TextField {...params} value={search.value} label={metadata.name} onChange={(e) => search.set(e.target.value)} name={path} />\n      )}\n    ></Autocomplete>\n  );\n};\n\nconst showMoreHoverOption = { recordId: \"-1\", label: \"Show more\" };\n"]}