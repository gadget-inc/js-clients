{"version":3,"file":"ShadcnAutoHasManyInput.js","sourceRoot":"","sources":["../../../../../../src/auto/shadcn/inputs/relationships/ShadcnAutoHasManyInput.tsx"],"names":[],"mappings":";;;;AAAA,uDAAuC;AACvC,wDAAkD;AAClD,oFAAmF;AACnF,0EAA2E;AAG3E,wEAAsE;AACtE,iFAAwE;AAEjE,MAAM,0BAA0B,GAAG,CAAC,EACzC,KAAK,EACL,MAAM,EACN,OAAO,EACP,WAAW,EACX,YAAY,EACZ,KAAK,EACL,WAAW,EACX,YAAY,EACZ,YAAY,EACZ,QAAQ,GAIT,EAAE,EAAE;IACH,MAAM,EAAE,kBAAkB,EAAE,GAAG,IAAA,qDAAsB,EAAC,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC;IACzE,MAAM,gBAAgB,GAAG,IAAA,kDAAwB,EAAC;QAChD,OAAO;QACP,YAAY;QACZ,KAAK;QACL,WAAW;QACX,WAAW;QACX,YAAY;QACZ,YAAY;QACZ,QAAQ;KACT,CAAC,CAAC;IAEH,SAAS,sBAAsB,CAAC,KAAiC;QAC/D,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;QAExB,MAAM,EACJ,aAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,EACjC,mBAAmB,EAAE,EAAE,OAAO,EAAE,mBAAmB,EAAE,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,EACvF,eAAe,EACf,YAAY,EACZ,SAAS,EAET,cAAc,EACd,cAAc,GACf,GAAG,IAAA,mDAAyB,EAAC,KAAK,CAAC,CAAC;QAErC,MAAM,WAAW,GAAG,IAAA,2CAAsB,EAAC,KAAK,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC;QAErE,MAAM,iBAAiB,GAAG,IAAA,eAAO,EAAC,GAAG,EAAE;YACrC,OAAO,eAAe,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAa,CAAC;QACrF,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;QAEtB,OAAO,CACL,8BAAC,gBAAgB,OACX,KAAK,EACT,OAAO,EAAE,OAAO,EAChB,IAAI,EAAE,IAAI,EACV,QAAQ,EAAE,QAAQ,EAClB,iBAAiB,EACf,8BAAC,kBAAkB,IAAC,eAAe,EAAE,eAAe,EAAE,WAAW,EAAE,WAAW,EAAE,cAAc,EAAE,cAAc,GAAI,EAEpH,QAAQ,EAAE,cAAc,EACxB,aAAa,EAAE,CAAC,EAAE,EAAE,EAAE;gBACpB,OAAO,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;YACxC,CAAC,EACD,SAAS,EAAE,SAAS,EACpB,YAAY,EAAE,YAAY,EAC1B,aAAa,EAAE,IAAI,EACnB,OAAO,EAAE,YAAY,CAAC,OAAO,GAC7B,CACH,CAAC;IACJ,CAAC;IAED,OAAO,IAAA,wBAAS,EAAC,sBAAsB,CAAC,CAAC;AAC3C,CAAC,CAAC;AArEW,QAAA,0BAA0B,8BAqErC","sourcesContent":["import React, { useMemo } from \"react\";\nimport { autoInput } from \"../../../AutoInput.js\";\nimport { useHasManyInputController } from \"../../../hooks/useHasManyController.js\";\nimport { useOptionLabelForField } from \"../../../hooks/useRelatedModel.js\";\nimport type { AutoRelationshipInputProps } from \"../../../interfaces/AutoRelationshipInputProps.js\";\nimport type { ShadcnElements } from \"../../elements.js\";\nimport { makeShadcnAutoComboInput } from \"../ShadcnAutoComboInput.js\";\nimport { makeSelectedRecordTags } from \"./SelectedRelatedRecordTags.js\";\n\nexport const makeShadcnAutoHasManyInput = ({\n  Badge,\n  Button,\n  Command,\n  CommandItem,\n  CommandInput,\n  Label,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  Checkbox,\n}: Pick<\n  ShadcnElements,\n  \"Badge\" | \"Button\" | \"Command\" | \"CommandItem\" | \"CommandList\" | \"CommandEmpty\" | \"CommandGroup\" | \"CommandInput\" | \"Label\" | \"Checkbox\"\n>) => {\n  const { SelectedRecordTags } = makeSelectedRecordTags({ Badge, Button });\n  const ShadcnComboInput = makeShadcnAutoComboInput({\n    Command,\n    CommandInput,\n    Label,\n    CommandItem,\n    CommandList,\n    CommandEmpty,\n    CommandGroup,\n    Checkbox,\n  });\n\n  function ShadcnAutoHasManyInput(props: AutoRelationshipInputProps) {\n    const { field } = props;\n\n    const {\n      fieldMetadata: { path, metadata },\n      relatedModelOptions: { options, searchFilterOptions, search, pagination, relatedModel },\n      selectedRecords,\n      errorMessage,\n      isLoading,\n\n      onSelectRecord,\n      onRemoveRecord,\n    } = useHasManyInputController(props);\n\n    const optionLabel = useOptionLabelForField(field, props.optionLabel);\n\n    const selectedRecordIds = useMemo(() => {\n      return selectedRecords.map((record) => record.id).filter((id) => !!id) as string[];\n    }, [selectedRecords]);\n\n    return (\n      <ShadcnComboInput\n        {...props}\n        options={options}\n        path={path}\n        metadata={metadata}\n        selectedRecordTag={\n          <SelectedRecordTags selectedRecords={selectedRecords} optionLabel={optionLabel} onRemoveRecord={onRemoveRecord} />\n        }\n        onSelect={onSelectRecord}\n        checkSelected={(id) => {\n          return selectedRecordIds.includes(id);\n        }}\n        isLoading={isLoading}\n        errorMessage={errorMessage}\n        allowMultiple={true}\n        records={relatedModel.records}\n      />\n    );\n  }\n\n  return autoInput(ShadcnAutoHasManyInput);\n};\n"]}