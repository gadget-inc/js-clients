{"version":3,"file":"ShadcnAutoButton.js","sourceRoot":"","sources":["../../../../src/auto/shadcn/ShadcnAutoButton.tsx"],"names":[],"mappings":";;;;AACA,0DAA0B;AAG1B,oFAA8E;AAG9E;;GAEG;AACI,MAAM,cAAc,GACzB,CAAkC,EAAE,MAAM,EAAE,KAAK,EAAY,EAAE,EAAE,CACjE,CAKE,KAAuE,EACvE,EAAE;IACF,MAAM,EAAE,QAAQ,EAAE,aAAa,EAAE,GAAG,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAA,oDAAuB,EAAC;QACnF,SAAS,EAAE,CAAC,OAAO,EAAE,EAAE;YACrB,KAAK,CAAC,OAAO,CAAC,GAAG,KAAK,aAAa,CAAC,CAAC;QACvC,CAAC;QACD,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE;YAC1B,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,uBAAuB,EAAE,EAAE,WAAW,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC/E,CAAC;QACD,GAAG,KAAK;KACT,CAAC,CAAC;IAEH,MAAM,EAAE,OAAO,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS,EAAE,GAAG,IAAI,EAAE,GAAG,KAAK,CAAC;IAE/E,OAAO,CACL,8BAAC,MAAM,IAAC,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,KAAM,WAAW,KAAM,IAAI,IAClF,KAAK,EAAE,QAAQ,IAAI,KAAK,CAClB,CACV,CAAC;AACJ,CAAC,CAAC;AA1BS,QAAA,cAAc,kBA0BvB","sourcesContent":["import type { ActionFunction, GlobalActionFunction } from \"@gadgetinc/api-client-core\";\nimport React from \"react\";\nimport type { OptionsType } from \"../../utils.js\";\nimport type { AutoButtonProps } from \"../hooks/useAutoButtonController.js\";\nimport { useAutoButtonController } from \"../hooks/useAutoButtonController.js\";\nimport { ButtonProps, type ShadcnElements } from \"./elements.js\";\n\n/**\n * Render a button that invokes an action when clicked, and shows a toast notification when the action succeeds or encounters an error by default.\n */\nexport const makeAutoButton =\n  <Elements extends ShadcnElements>({ Button, toast }: Elements) =>\n  <\n    GivenOptions extends OptionsType,\n    SchemaT,\n    ActionFunc extends ActionFunction<GivenOptions, any, any, SchemaT, any> | GlobalActionFunction<any>\n  >(\n    props: AutoButtonProps<GivenOptions, SchemaT, ActionFunc> & ButtonProps\n  ) => {\n    const { fetching, isDestructive, run, label, buttonProps } = useAutoButtonController({\n      onSuccess: (_result) => {\n        toast.success(`${label} succeeded.`);\n      },\n      onError: (error, _result) => {\n        toast.error(`${label} encountered an error`, { description: error.message });\n      },\n      ...props,\n    });\n\n    const { variant = isDestructive ? \"destructive\" : \"default\", ...rest } = props;\n\n    return (\n      <Button disabled={fetching} variant={variant} onClick={run} {...buttonProps} {...rest}>\n        {props?.children ?? label}\n      </Button>\n    );\n  };\n"]}